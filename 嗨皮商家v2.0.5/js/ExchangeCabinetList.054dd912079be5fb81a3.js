(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ExchangeCabinetList"],{"097b":function(t,e,n){"use strict";var a=n("21f1"),i=n.n(a);i.a},"21f1":function(t,e,n){},2286:function(t,e,n){"use strict";var a=n("4600"),i=n.n(a);i.a},"28d5":function(t,e,n){"use strict";var a=n("59e9"),i=n.n(a);i.a},4600:function(t,e,n){},"48d0":function(t,e,n){"use strict";var a=n("9d6c"),i=n.n(a);i.a},"492f":function(t,e,n){"use strict";n("caad"),n("a9e3");var a,i,r=n("5530"),o=n("5cc0"),s=n("2f62"),l={name:"MyMachine",components:{LinkageSelection:o["a"]},model:{prop:"value",event:"trigger-change"},props:{storeId:[String,Number],areaId:[String,Number],value:{default:function(){return{}}},title:{type:String,default:"请选择机台"},type:{type:String,default:"MACHINE",validator:function(t){return["MACHINE","MACHINE_TYPE"].includes(t)}},rightIcon:{type:String,default:"arrow"},columns:Array},data:function(){return{list:[]}},watch:{areaId:{handler:function(t){var e=this.storeId,n=this.type;if(e&&t){var a={storeId:e,areaId:t};if("MACHINE_TYPE"===n)return void this.COMMON_GETMACHINETYPE_ACTION(a).then(this.handleReturnDeal);this.COMMON_GETMACHINE_ACTION(a).then(this.handleReturnDeal)}else this.list=[],this.$emit("trigger-change",{})},immediate:!0}},methods:Object(r["a"])(Object(r["a"])({},Object(s["b"])(["COMMON_GETMACHINE_ACTION","COMMON_GETMACHINETYPE_ACTION"])),{},{handleChoseMachine:function(t){this.$emit("trigger-change",t.value)},handleReturnDeal:function(t){if("0"===t.return_code){var e=t.data;this.list=e,this.$emit("trigger-change",{})}}}),render:function(){for(var t,e=arguments[0],n=this.value,a=this.list,i=this.handleChoseMachine,r=this.title,s=this.rightIcon,l=0,c=0;c<a.length;++c)if(a[c].id===n.id){t=a[c].no,l=c;break}return e(o["a"],{attrs:{"right-icon":s,title:r,value:t,columns:a,"default-index":l},on:{"trigger-confirm":i}})}},c=l,u=n("2877"),d=Object(u["a"])(c,a,i,!1,null,null,null),h=d.exports;e["a"]=h},5594:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-popup"},[n("van-popup",{attrs:{position:"bottom","close-on-click-overlay":t.maskClose,overlay:t.overlay},on:{"click-overlay":t.handleClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:t.columns,"default-index":t.defaultIndex},on:{change:t.handleChange,cancel:t.handleCancel,confirm:t.handleConfirm}})],1)],1)},i=[],r=(n("a9e3"),{name:"BottomPopup",components:{},props:{maskClose:{type:Boolean,default:!1},columns:{default:function(){return[]},type:Array},overlay:{default:!0,type:Boolean},show:{default:!1,type:Boolean},defaultIndex:Number},data:function(){return{loading:!0}},computed:{},watch:{columns:{handler:function(){this.loading=!1}}},mounted:function(){},methods:{handleCancel:function(){this.$emit("trigger-cancel"),this.handleClose()},handleConfirm:function(t,e){this.$emit("trigger-confirm",{value:t,index:e}),this.handleClose()},handleClose:function(){this.$emit("trigger-close")},handleChange:function(){}}}),o=r,s=n("2877"),l=Object(s["a"])(o,a,i,!1,null,"2f72655a",null),c=l.exports;e["a"]=c},"573d":function(t,e,n){"use strict";var a=n("9529"),i=n.n(a);i.a},"59e9":function(t,e,n){},"5cc0":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CellList",{attrs:{title:t.title,value:t.value,"right-icon":t.rightIcon,placeholder:t.placeholder},on:{"trigger-click":function(e){t.show=!0}},scopedSlots:t._u([t.$slots.title?{key:"title",fn:function(){return[t._t("title")]},proxy:!0}:null,t.$slots["right-icon"]?{key:"right-icon",fn:function(){return[t._t("right-icon")]},proxy:!0}:null],null,!0)}),n("BottomPopup",{attrs:{columns:t.columns,"default-index":t.defaultIndex,show:t.show},on:{"trigger-confirm":t.handleConfirm,"trigger-close":function(e){t.show=!1}}})],1)},i=[],r=(n("a9e3"),n("a5ab")),o=n("5594"),s={name:"LinkageSelection",components:{CellList:r["a"],BottomPopup:o["a"]},model:{prop:"value",event:"trigger-confirm"},props:{value:{default:""},defaultIndex:Number,disabled:{type:Boolean,default:!1},title:String,placeholder:String,columns:Array,rightIcon:{type:String}},data:function(){return{show:!1}},computed:{},mounted:function(){},methods:{handleConfirm:function(t){this.disabled||this.$emit("trigger-confirm",t)}}},l=s,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,"673b6974",null),d=u.exports;e["a"]=d},"6a97":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dl",{staticClass:"machine-card"},[t.title?n("dt",{staticClass:"size-28 color-3 machine-card-place"},[t._v(t._s(t.title))]):t._e(),n("dd",{staticClass:"machine-card-main bgcolor-f2"},[n("ul",{staticClass:"machine-card-content"},[t._t("default")],2)])])},i=[],r={name:"MachineCard",components:{},props:{title:String},data:function(){return{}},computed:{},mounted:function(){},methods:{}},o=r,s=(n("2286"),n("2877")),l=Object(s["a"])(o,a,i,!1,null,null,null),c=l.exports;e["a"]=c},9529:function(t,e,n){},"9d6c":function(t,e,n){},a5ab:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cell-list flex-row flex-between-center padding-20-30",on:{click:t.handleClick}},[n("div",{staticClass:"cell-list-title size-28 color-3"},[t._v(" "+t._s(t.$slots["title"]?null:t.title)+" "),t._t("title")],2),n("div",{staticClass:"size-28 flex-row flex-start-center"},[t.value?n("span",[t._v(t._s(t.value))]):n("span",{staticClass:"cell-list-placeholder"},[t._v(t._s(t.placeholder))]),t.rightIcon?n("van-icon",{staticClass:"flex-row flex-center margin-left-10 size-32",attrs:{color:"#969799",name:t.rightIcon}}):t._e(),t._t("rigth-icon")],2)])},i=[],r={name:"CellList",components:{},props:{title:String,value:String,placeholder:String,leftIcon:{type:Boolean,default:!1},rightIcon:{type:String}},data:function(){return{}},computed:{},mounted:function(){},methods:{handleClick:function(t){this.$emit("trigger-click",t)}}},o=r,s=(n("097b"),n("2877")),l=Object(s["a"])(o,a,i,!1,null,null,null),c=l.exports;e["a"]=c},a8aa:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-store"},[n("div",{staticClass:"my-store-container size-32 flex-row flex-start-center"},[n("div",{on:{click:t.handleClick}},[n("span",{staticClass:"my-store-name color-393D49"},[t._v(t._s(t.store.store_name))]),n("van-icon",{staticClass:"color-de",attrs:{name:t.arrow}})],1),t._t("default")],2),n("div",{staticClass:"border"}),n("div",[n("BottomPopup",{attrs:{columns:t.columns,"default-index":t.selectIndex,show:t.show},on:{"trigger-confirm":t.handleConfirm,"trigger-close":t.handleClose}})],1)])},i=[],r=(n("4de4"),n("d81d"),n("a9e3"),n("5530")),o=n("5594"),s=n("2f62"),l={name:"MyStore",components:{BottomPopup:o["a"]},props:{open:{default:!1,type:Boolean},defaultIndex:Number,storeId:[String,Number]},data:function(){return{show:!1,store:{store_name:"请选择门店"},selectIndex:null}},computed:Object(r["a"])(Object(r["a"])({},Object(s["d"])({storeList:function(t){return t.common.storeList}})),{},{columns:{get:function(){var t=this.storeList;return t.map((function(t){var e=Object(r["a"])({text:t.store_name},t);return e}))}},arrow:function(){return this.show?"arrow-up":"arrow-down"}}),watch:{storeList:{handler:function(t){var e=this.storeId,n=this.defaultIndex;if(t.length>0){if(e&&e>=0){var a=t.map((function(t,e){return Object(r["a"])(Object(r["a"])({},t),{},{index:e})})).filter((function(t){return t.store_id===String(e)}));if(a.length>0){var i=a[0];this.selectIndex=i.index,this.store=Object(r["a"])({},i)}}else n>=0&&(this.selectIndex=n,this.store=Object(r["a"])({},t[0]));(n>=0||e>=0)&&this.$emit("trigger-click",{value:Object(r["a"])(Object(r["a"])({},this.store),{},{index:this.selectIndex})})}},immediate:!0}},created:function(){0===this.storeList.length&&this.getStore()},methods:Object(r["a"])(Object(r["a"])({},Object(s["b"])(["COMMON_GETSTORE_ACTION"])),{},{handleClick:function(){this.show=!0},handleConfirm:function(t){var e=t.value,n=t.index;this.store=Object(r["a"])({},e),this.$emit("trigger-click",{value:e,index:n})},handleClose:function(){this.show=!1},getStore:function(){var t=this;this.COMMON_GETSTORE_ACTION().then((function(e){"0"!==e.return_code&&t.$Tip.warning(e.msg)}))}})},c=l,u=(n("48d0"),n("2877")),d=Object(u["a"])(c,a,i,!1,null,"de8e6c12",null),h=d.exports;e["a"]=h},b3ba:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"exchange-cabinet-list bgcolor-f2 main-body flex-column"},[n("div",{staticClass:"header bgcolor-f"},[n("MyStore",{attrs:{"store-id":t.storeId,"default-index":0},on:{"trigger-click":t.handleConfirm}}),n("div",{staticClass:"border"}),n("div",{staticClass:"flex-row flex-start-center"},[n("div",{staticClass:"width-half"},[n("MyArea",{attrs:{"store-id":t.storeId,value:t.area,"right-icon":"arrow-down"},on:{"trigger-change":t.handleChangeArea}})],1),n("div",{staticClass:"width-half"},[n("MyMachine",{attrs:{"store-id":t.storeId,"area-id":t.area.id,value:t.machine,"right-icon":"arrow-down",title:"请选择机型",type:"MACHINE_TYPE"},on:{"trigger-change":t.handleChangeMachine}})],1)]),n("div",{staticClass:"border"})],1),n("div",{staticClass:"main-container size-28"},[n("MachineCard",t._l(t.columns,(function(e){return n("li",{key:e.gift_id,on:{click:function(){return t.handleClick(e.mid,e.hole_id)}}},[n("TabulatingCard",{attrs:{img:e.gift_img},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(e.gift_id))]},proxy:!0},{key:"content",fn:function(){return[t._v(t._s(e.status))]},proxy:!0}],null,!0)})],1)})),0)],1)])},i=[],r=n("a8aa"),o=n("f059"),s=n("492f"),l=n("b780"),c=n("6a97"),u=n("365c"),d={name:"ExchangeCabinetList",components:{MyStore:r["a"],MachineCard:c["a"],MyArea:o["a"],MyMachine:s["a"],TabulatingCard:l["a"]},data:function(){return{storeId:null,area:{},machine:{},columns:[]}},computed:{},mounted:function(){},methods:{handleClick:function(t,e){this.$router.push({name:"ExchangeCabinetDetail",query:{mid:t,hid:e,sid:this.storeId}})},handleConfirm:function(t){this.storeId=t.value.store_id,this.storeName=t.value.store_name,this.getList({store_id:this.storeId})},handleChangeArea:function(t){this.area=t},handleChangeMachine:function(t){this.machine=t,this.getList({store_id:this.storeId,mid:t.id})},getList:function(t){var e=this;this.$Loading("正在加载中……"),Object(u["s"])(t).then((function(t){e.$Loading.clear(),"0"===t.return_code&&t.data&&(e.columns=t.data)}))}}},h=d,f=(n("28d5"),n("2877")),g=Object(f["a"])(h,a,i,!1,null,null,null);e["default"]=g.exports},b780:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabulating-card"},[n("div",{staticClass:"tabulating-card-img bgcolor-f2 flex-row flex-center"},[t.$slots.tag?n("div",{staticClass:"tabulating-card-tag size-24"},[n("van-tag",{attrs:{color:t.tagColor,size:"large"}},[t._t("tag")],2)],1):t._e(),n("img",{staticClass:"tabulating-card-img-content",attrs:{src:t.img,alt:""}})]),n("div",[n("p",{staticClass:"flex-row flex-between-center"},[t._t("title")],2),n("p",{staticClass:"flex-row flex-between-center"},[t._t("content")],2)])])},i=[],r={name:"TabulatingCard",components:{},props:{img:String,tagColor:{type:String,default:"#ff5722"}},data:function(){return{}},computed:{},mounted:function(){},methods:{}},o=r,s=(n("573d"),n("2877")),l=Object(s["a"])(o,a,i,!1,null,null,null),c=l.exports;e["a"]=c},f059:function(t,e,n){"use strict";n("b0c0");var a,i,r=n("5530"),o=n("5cc0"),s=n("2f62"),l={name:"MyArea",components:{LinkageSelection:o["a"]},model:{prop:"value",event:"trigger-change"},props:{storeId:String,value:{default:function(){return{}}},title:{type:String,default:"请选择区域"},rightIcon:{type:String,default:"arrow"},columns:Array},data:function(){return{list:[]}},watch:{storeId:{handler:function(t){var e=this;t&&this.COMMON_GETAREA_ACTION({storeId:t}).then((function(t){"0"===t.return_code&&(e.list=t.data,e.$emit("trigger-change",{}))}))},immediate:!0}},methods:Object(r["a"])(Object(r["a"])({},Object(s["b"])(["COMMON_GETAREA_ACTION"])),{},{handleChoseArea:function(t){this.$emit("trigger-change",t.value)}}),render:function(){for(var t,e=arguments[0],n=this.value,a=this.list,i=this.handleChoseArea,r=this.title,s=this.rightIcon,l=0,c=0;c<a.length;++c)if(a[c].id===n.id){t=a[c].name,l=c;break}return e(o["a"],{attrs:{"right-icon":s,title:r,value:t,columns:a,"default-index":l},on:{"trigger-confirm":i}})}},c=l,u=n("2877"),d=Object(u["a"])(c,a,i,!1,null,"1953f11e",null),h=d.exports;e["a"]=h}}]);