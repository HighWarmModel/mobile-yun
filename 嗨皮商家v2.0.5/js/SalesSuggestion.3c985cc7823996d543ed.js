(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SalesSuggestion"],{"097b":function(t,e,n){"use strict";var i=n("21f1"),a=n.n(i);a.a},"21f1":function(t,e,n){},"2d10":function(t,e,n){"use strict";var i=n("c570"),a=n.n(i);a.a},4101:function(t,e,n){},"48d0":function(t,e,n){"use strict";var i=n("9d6c"),a=n.n(i);a.a},"492f":function(t,e,n){"use strict";n("caad"),n("a9e3");var i,a,r=n("5530"),s=n("5cc0"),o=n("2f62"),l={name:"MyMachine",components:{LinkageSelection:s["a"]},model:{prop:"value",event:"trigger-change"},props:{storeId:[String,Number],areaId:[String,Number],value:{default:function(){return{}}},title:{type:String,default:"请选择机台"},type:{type:String,default:"MACHINE",validator:function(t){return["MACHINE","MACHINE_TYPE"].includes(t)}},rightIcon:{type:String,default:"arrow"},columns:Array},data:function(){return{list:[]}},watch:{areaId:{handler:function(t){var e=this.storeId,n=this.type;if(e&&t){var i={storeId:e,areaId:t};if("MACHINE_TYPE"===n)return void this.COMMON_GETMACHINETYPE_ACTION(i).then(this.handleReturnDeal);this.COMMON_GETMACHINE_ACTION(i).then(this.handleReturnDeal)}else this.list=[],this.$emit("trigger-change",{})},immediate:!0}},methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["COMMON_GETMACHINE_ACTION","COMMON_GETMACHINETYPE_ACTION"])),{},{handleChoseMachine:function(t){this.$emit("trigger-change",t.value)},handleReturnDeal:function(t){if("0"===t.return_code){var e=t.data;this.list=e,this.$emit("trigger-change",{})}}}),render:function(){for(var t,e=arguments[0],n=this.value,i=this.list,a=this.handleChoseMachine,r=this.title,o=this.rightIcon,l=0,c=0;c<i.length;++c)if(i[c].id===n.id){t=i[c].no,l=c;break}return e(s["a"],{attrs:{"right-icon":o,title:r,value:t,columns:i,"default-index":l},on:{"trigger-confirm":a}})}},c=l,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null),h=d.exports;e["a"]=h},5594:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-popup"},[n("van-popup",{attrs:{position:"bottom","close-on-click-overlay":t.maskClose,overlay:t.overlay},on:{"click-overlay":t.handleClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:t.columns,"default-index":t.defaultIndex},on:{change:t.handleChange,cancel:t.handleCancel,confirm:t.handleConfirm}})],1)],1)},a=[],r=(n("a9e3"),{name:"BottomPopup",components:{},props:{maskClose:{type:Boolean,default:!1},columns:{default:function(){return[]},type:Array},overlay:{default:!0,type:Boolean},show:{default:!1,type:Boolean},defaultIndex:Number},data:function(){return{loading:!0}},computed:{},watch:{columns:{handler:function(){this.loading=!1}}},mounted:function(){},methods:{handleCancel:function(){this.$emit("trigger-cancel"),this.handleClose()},handleConfirm:function(t,e){this.$emit("trigger-confirm",{value:t,index:e}),this.handleClose()},handleClose:function(){this.$emit("trigger-close")},handleChange:function(){}}}),s=r,o=n("2877"),l=Object(o["a"])(s,i,a,!1,null,"2f72655a",null),c=l.exports;e["a"]=c},"5bdd":function(t,e,n){},"5cc0":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CellList",{attrs:{title:t.title,value:t.value,"right-icon":t.rightIcon,placeholder:t.placeholder},on:{"trigger-click":function(e){t.show=!0}},scopedSlots:t._u([t.$slots.title?{key:"title",fn:function(){return[t._t("title")]},proxy:!0}:null,t.$slots["right-icon"]?{key:"right-icon",fn:function(){return[t._t("right-icon")]},proxy:!0}:null],null,!0)}),n("BottomPopup",{attrs:{columns:t.columns,"default-index":t.defaultIndex,show:t.show},on:{"trigger-confirm":t.handleConfirm,"trigger-close":function(e){t.show=!1}}})],1)},a=[],r=(n("a9e3"),n("a5ab")),s=n("5594"),o={name:"LinkageSelection",components:{CellList:r["a"],BottomPopup:s["a"]},model:{prop:"value",event:"trigger-confirm"},props:{value:{default:""},defaultIndex:Number,disabled:{type:Boolean,default:!1},title:String,placeholder:String,columns:Array,rightIcon:{type:String}},data:function(){return{show:!1}},computed:{},mounted:function(){},methods:{handleConfirm:function(t){this.disabled||this.$emit("trigger-confirm",t)}}},l=o,c=n("2877"),u=Object(c["a"])(l,i,a,!1,null,"673b6974",null),d=u.exports;e["a"]=d},9679:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sales-suggestion"},[n("div",{staticClass:"header bgcolor-f"},[n("div",{staticClass:"fixed top-0 left-0 width-2half bgcolor-f",staticStyle:{"z-index":"10"}},[n("MyStore",{attrs:{"store-id":t.storeId,"default-index":0},on:{"trigger-click":t.handleConfirm}},[n("div",{staticClass:"flex-row flex-end-center flex-1"},[n("TipIcon")],1)]),n("div",{staticClass:"border"}),n("div",{staticClass:"flex-row flex-start-center"},[n("div",{staticClass:"width-half"},[n("MyArea",{attrs:{"store-id":t.storeId,value:t.area,"right-icon":"arrow-down"},on:{"trigger-change":t.handleChangeArea}})],1),n("div",{staticClass:"width-half"},[n("MyMachine",{attrs:{"store-id":t.storeId,"area-id":t.area.id,value:t.machine,"right-icon":"arrow-down",title:"请选择机型",type:"MACHINE_TYPE"},on:{"trigger-change":t.handleChangeMachine}})],1)]),n("div",{staticClass:"border"}),n("SortList",{attrs:{"sort-data":t.sortData},on:{"trigger-click":t.handleSort}}),n("div",{staticClass:"border"})],1)]),n("div",{staticClass:"main"},[n("div",{staticClass:"container"},[n("van-pull-refresh",{staticStyle:{overflow:"initial"},on:{refresh:t.handleRefresh},model:{value:t.freshLoading,callback:function(e){t.freshLoading=e},expression:"freshLoading"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",offset:10},on:{load:t.handleLoading},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,i){return n("div",{key:i,staticClass:"bgcolor-f"},[n("ul",{staticClass:"flex-row flex-start-center padding-0-20"},[n("li",{staticClass:"relative flex-column flex-center content-first"},[n("span",{staticClass:"size-24 tag",style:{color:t.isOnSaleStatus[e.is_on_sale].color}},[t._v(t._s(t.isOnSaleStatus[e.is_on_sale].text))]),n("div",{staticClass:"img"},[n("LoadingImg",{staticClass:"max-width-2half max-height-2half",attrs:{magnify:"",fit:"cover",img:e.gift_img.img,thumb:e.gift_img.thumb}})],1),n("span",{staticClass:"text-ellipsis width-2half size-24"},[t._v(t._s(e.gift_name))])]),n("li",{staticClass:"size-24 content-second"},[t._v(" "+t._s(e.area_name)+"-"+t._s(e.no)+" ")]),n("li",{staticClass:"size-24 content-third"},[t._v(t._s(e.profit_rate)+"%")]),n("li",{staticClass:"size-24 flex-1 text-center"},[t._v(" "+t._s(e.suggestion_msg)+" ")])]),n("div",{staticClass:"border"})])})),0)],1)],1)])])},a=[],r=(n("99af"),n("d81d"),n("5530")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"sort-list flex-row flex-start-center bgcolor-f padding-20"},t._l(t.sortData,(function(e){return n("li",{key:e.key,staticClass:"flex-1 flex-row flex-center",on:{click:function(n){return t.handleClick(e)}}},[n("span",{class:["text-nowrap size-28",e.sort?"active":null]},[t._v(t._s(e.name))]),void 0!==e.sort?n("div",{staticClass:"padding-left-10 flex-column flex-center"},[n("span",{class:["triangle color-d",e.sort]})]):t._e()])})),0)},o=[],l={name:"SortList",components:{},props:{sortData:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:{},mounted:function(){},methods:{handleClick:function(t){void 0!==t.sort&&this.$emit("trigger-click",t)}}},c=l,u=(n("ee42"),n("2877")),d=Object(u["a"])(c,s,o,!1,null,null,null),h=d.exports,f=n("a8aa"),g=n("f059"),m=n("492f"),p=n("c85b"),v=n("5171"),C=n("ae0a"),_=n("365c"),b=[{key:"is_on_sale",sort:"",name:"销售状态"},{key:"mid",name:"机台"},{key:"profit_rate",sort:"",name:"近七天毛利率"},{key:"suggestion",name:"运营建议"}],x={name:"SalesSuggestion",components:{SortList:h,MyStore:f["a"],LoadingImg:C["a"],MyArea:g["a"],MyMachine:m["a"],TipIcon:p["a"]},data:function(){return{sortData:b.map((function(t){return Object(r["a"])({},t)})),saleSuggestion:Object(r["a"])({},v["j"]),isOnSaleStatus:Object(r["a"])({},v["f"]),checkedSort:null,storeId:null,freshLoading:!1,loading:!1,finished:!0,list:[],limit:20,page:1,area:{},machine:{}}},computed:{},created:function(){var t=this.$route.query.sid;t&&(this.storeId=t)},mounted:function(){},methods:{handleConfirm:function(t){this.storeId=t.value.store_id},handleChangeArea:function(t){this.area=t},handleChangeMachine:function(t){this.machine=t,this.list=[],this.sortData=b.map((function(t){return Object(r["a"])({},t)})),this.machine.id&&this.handleSort({})},handleRouter:function(){this.$router.push({name:"Article"})},getDataList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.$Loading({message:"加载中..."});var n={};this.checkedSort&&(n={sort:this.checkedSort.key,sort_by:this.checkedSort.sort});var i=this.page,a=this.storeId,r=this.machine.id,s=this.area.id;n.store_id=a,n.page=i,n.area_id=s,n.type_id=r,Object(_["K"])(n).then((function(n){t.$Loading.clear();var i=[];"0"===n.return_code?(i=n.data.list,++t.page):t.$Tip.warning(n.msg),e(i)}))},handleRefresh:function(){var t=this;this.page=1,this.getDataList((function(e){t.list=e,t.finished=e.length<t.limit||0===e.length,t.freshLoading=!1}))},handleLoading:function(){var t=this;this.getDataList((function(e){t.list=t.list.concat(e),t.finished=e.length<t.limit||0===e.length,t.loading=!1}))},handleSort:function(t){var e=this;void 0!==t.sort&&(this.checkedSort=null,this.sortData=this.sortData.map((function(n){var i=Object(r["a"])({},n);return t.key===i.key?(i.sort="asc"===i.sort?"desc":"asc",e.checkedSort=Object(r["a"])({},i)):void 0!==i.sort&&(i.sort=""),i}))),this.handleRefresh()}}},y=x,O=(n("2d10"),Object(u["a"])(y,i,a,!1,null,"59187a12",null));e["default"]=O.exports},"9d6c":function(t,e,n){},a5ab:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cell-list flex-row flex-between-center padding-20-30",on:{click:t.handleClick}},[n("div",{staticClass:"cell-list-title size-28 color-3"},[t._v(" "+t._s(t.$slots["title"]?null:t.title)+" "),t._t("title")],2),n("div",{staticClass:"size-28 flex-row flex-start-center"},[t.value?n("span",[t._v(t._s(t.value))]):n("span",{staticClass:"cell-list-placeholder"},[t._v(t._s(t.placeholder))]),t.rightIcon?n("van-icon",{staticClass:"flex-row flex-center margin-left-10 size-32",attrs:{color:"#969799",name:t.rightIcon}}):t._e(),t._t("rigth-icon")],2)])},a=[],r={name:"CellList",components:{},props:{title:String,value:String,placeholder:String,leftIcon:{type:Boolean,default:!1},rightIcon:{type:String}},data:function(){return{}},computed:{},mounted:function(){},methods:{handleClick:function(t){this.$emit("trigger-click",t)}}},s=r,o=(n("097b"),n("2877")),l=Object(o["a"])(s,i,a,!1,null,null,null),c=l.exports;e["a"]=c},a8aa:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-store"},[n("div",{staticClass:"my-store-container size-32 flex-row flex-start-center"},[n("div",{on:{click:t.handleClick}},[n("span",{staticClass:"my-store-name color-393D49"},[t._v(t._s(t.store.store_name))]),n("van-icon",{staticClass:"color-de",attrs:{name:t.arrow}})],1),t._t("default")],2),n("div",{staticClass:"border"}),n("div",[n("BottomPopup",{attrs:{columns:t.columns,"default-index":t.selectIndex,show:t.show},on:{"trigger-confirm":t.handleConfirm,"trigger-close":t.handleClose}})],1)])},a=[],r=(n("4de4"),n("d81d"),n("a9e3"),n("5530")),s=n("5594"),o=n("2f62"),l={name:"MyStore",components:{BottomPopup:s["a"]},props:{open:{default:!1,type:Boolean},defaultIndex:Number,storeId:[String,Number]},data:function(){return{show:!1,store:{store_name:"请选择门店"},selectIndex:null}},computed:Object(r["a"])(Object(r["a"])({},Object(o["d"])({storeList:function(t){return t.common.storeList}})),{},{columns:{get:function(){var t=this.storeList;return t.map((function(t){var e=Object(r["a"])({text:t.store_name},t);return e}))}},arrow:function(){return this.show?"arrow-up":"arrow-down"}}),watch:{storeList:{handler:function(t){var e=this.storeId,n=this.defaultIndex;if(t.length>0){if(e&&e>=0){var i=t.map((function(t,e){return Object(r["a"])(Object(r["a"])({},t),{},{index:e})})).filter((function(t){return t.store_id===String(e)}));if(i.length>0){var a=i[0];this.selectIndex=a.index,this.store=Object(r["a"])({},a)}}else n>=0&&(this.selectIndex=n,this.store=Object(r["a"])({},t[0]));(n>=0||e>=0)&&this.$emit("trigger-click",{value:Object(r["a"])(Object(r["a"])({},this.store),{},{index:this.selectIndex})})}},immediate:!0}},created:function(){0===this.storeList.length&&this.getStore()},methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["COMMON_GETSTORE_ACTION"])),{},{handleClick:function(){this.show=!0},handleConfirm:function(t){var e=t.value,n=t.index;this.store=Object(r["a"])({},e),this.$emit("trigger-click",{value:e,index:n})},handleClose:function(){this.show=!1},getStore:function(){var t=this;this.COMMON_GETSTORE_ACTION().then((function(e){"0"!==e.return_code&&t.$Tip.warning(e.msg)}))}})},c=l,u=(n("48d0"),n("2877")),d=Object(u["a"])(c,i,a,!1,null,"de8e6c12",null),h=d.exports;e["a"]=h},ae0a:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loading-img flex-row flex-center",style:t.wrapStyl},[t.img?n("van-image",{attrs:{src:t.thumb||t.img,"lazy-load":"",fit:t.fit},on:{click:function(e){return t.handleClick(e,t.img)}},scopedSlots:t._u([{key:"loading",fn:function(){return[n("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!1,2352118052)}):t._e()],1)},a=[],r=(n("a9e3"),n("5530")),s=n("2f62"),o={name:"LoadingImg",components:{},props:{img:{type:String},thumb:{type:String},fit:{type:String},width:Number||String,height:Number||String,radius:Number||String,magnify:{type:Boolean,default:!1}},data:function(){return{showErr:!1}},computed:{wrapStyl:function(){var t=this.width,e=this.height,n=this.radius;return t="number"===typeof t?"".concat(t,"px"):t,e="number"===typeof e?"".concat(e,"px"):e,n="number"===typeof n?"".concat(n,"px"):n,{width:t,height:e,"border-radius":n}}},methods:Object(r["a"])(Object(r["a"])({},Object(s["c"])(["APP_IMAGEPREVIEW_MUTATE"])),{},{handleClick:function(t,e){this.magnify&&this.APP_IMAGEPREVIEW_MUTATE({previewImage:[e],imagePreviewShow:!0})}})},l=o,c=(n("ebc4"),n("2877")),u=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=u.exports},c570:function(t,e,n){},c85b:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-icon",{attrs:{name:"question-o",size:"0.4rem"},on:{click:t.handleRouter}})},a=[],r={name:"TipIcon",components:{},data:function(){return{tip:null}},computed:{},created:function(){var t=this.$route.meta;t&&t.tip&&(this.tip=t.tip)},mounted:function(){},methods:{handleRouter:function(){var t=this.tip;t&&(location.href=t)}}},s=r,o=n("2877"),l=Object(o["a"])(s,i,a,!1,null,"05ef9caa",null);e["a"]=l.exports},ebc4:function(t,e,n){"use strict";var i=n("5bdd"),a=n.n(i);a.a},ee42:function(t,e,n){"use strict";var i=n("4101"),a=n.n(i);a.a},f059:function(t,e,n){"use strict";n("b0c0");var i,a,r=n("5530"),s=n("5cc0"),o=n("2f62"),l={name:"MyArea",components:{LinkageSelection:s["a"]},model:{prop:"value",event:"trigger-change"},props:{storeId:String,value:{default:function(){return{}}},title:{type:String,default:"请选择区域"},rightIcon:{type:String,default:"arrow"},columns:Array},data:function(){return{list:[]}},watch:{storeId:{handler:function(t){var e=this;t&&this.COMMON_GETAREA_ACTION({storeId:t}).then((function(t){"0"===t.return_code&&(e.list=t.data,e.$emit("trigger-change",{}))}))},immediate:!0}},methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["COMMON_GETAREA_ACTION"])),{},{handleChoseArea:function(t){this.$emit("trigger-change",t.value)}}),render:function(){for(var t,e=arguments[0],n=this.value,i=this.list,a=this.handleChoseArea,r=this.title,o=this.rightIcon,l=0,c=0;c<i.length;++c)if(i[c].id===n.id){t=i[c].name,l=c;break}return e(s["a"],{attrs:{"right-icon":o,title:r,value:t,columns:i,"default-index":l},on:{"trigger-confirm":a}})}},c=l,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,"1953f11e",null),h=d.exports;e["a"]=h}}]);