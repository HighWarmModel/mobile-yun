(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AddGiftStorage"],{"048b":function(t,e,n){"use strict";var i=n("40ec"),r=n.n(i);r.a},1148:function(t,e,n){"use strict";var i=n("a691"),r=n("1d80");t.exports="".repeat||function(t){var e=String(r(this)),n="",s=i(t);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(n+=e);return n}},"24b0":function(t,e,n){},"408a":function(t,e,n){var i=n("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"40ec":function(t,e,n){},"48d0":function(t,e,n){"use strict";var i=n("9d6c"),r=n.n(i);r.a},5594:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-popup"},[n("van-popup",{attrs:{position:"bottom","close-on-click-overlay":t.maskClose,overlay:t.overlay},on:{"click-overlay":t.handleClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:t.columns,"default-index":t.defaultIndex},on:{change:t.handleChange,cancel:t.handleCancel,confirm:t.handleConfirm}})],1)],1)},r=[],s=(n("a9e3"),{name:"BottomPopup",components:{},props:{maskClose:{type:Boolean,default:!1},columns:{default:function(){return[]},type:Array},overlay:{default:!0,type:Boolean},show:{default:!1,type:Boolean},defaultIndex:Number},data:function(){return{loading:!0}},computed:{},watch:{columns:{handler:function(){this.loading=!1}}},mounted:function(){},methods:{handleCancel:function(){this.$emit("trigger-cancel"),this.handleClose()},handleConfirm:function(t,e){this.$emit("trigger-confirm",{value:t,index:e}),this.handleClose()},handleClose:function(){this.$emit("trigger-close")},handleChange:function(){}}}),a=s,o=n("2877"),l=Object(o["a"])(a,i,r,!1,null,"2f72655a",null),c=l.exports;e["a"]=c},"6ac7":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-row flex-between-stretch size-28 color-393d49 gift-list bgcolor-f",on:{click:function(e){return t.handleClick(t.result)}}},[void 0!==t.checked?n("div",{staticClass:"gift-list-check flex-row flex-center"},[n("van-checkbox",{attrs:{name:t.result.gift_id},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1):t._e(),n("div",{staticClass:"flex-1 flex-row flex-between-stretch"},[n("div",{staticClass:"flex-row flex-start-stretch"},[t.result.thumb||t.result.gift_img?n("div",{staticClass:"gift-list-img bgcolor-f2 flex-row flex-center"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.result.thumb||t.result.gift_img,expression:"result.thumb || result.gift_img"}],staticClass:"gift-list-img-content",on:{click:function(e){return e.stopPropagation(),t.APP_IMAGEPREVIEW_MUTATE({previewImage:[t.result.img],imagePreviewShow:!0})}}})]):t._e(),n("div",{staticClass:"flex-column flex-center-start"},[n("span",{staticClass:"color-393d49 size-30 weight-bold padding-bottom-20 max-width-400 text-ellipsis text-break text-justify"},[t._v(t._s(t.result.gift_name))]),n("span",{staticClass:"size-28 color-454545"},[t._v("编号"+t._s(t.result.gift_id))])])]),t._t("default")],2)])},r=[],s=n("5530"),a=n("2f62"),o={name:"GiftList",components:{},props:{result:{type:Object}},data:function(){return{}},computed:{checked:{get:function(){return this.result.checked},set:function(t){this.$emit("trigger-click",Object(s["a"])(Object(s["a"])({},this.result),{},{checked:t}))}}},methods:Object(s["a"])(Object(s["a"])({},Object(a["c"])(["APP_IMAGEPREVIEW_MUTATE"])),{},{handleClick:function(){this.$emit("trigger-click",Object(s["a"])(Object(s["a"])({},this.result),{},{checked:!this.result.checked}))}})},l=o,c=(n("9388"),n("2877")),u=Object(c["a"])(l,i,r,!1,null,"5938b618",null),d=u.exports;e["a"]=d},9388:function(t,e,n){"use strict";var i=n("a3fb"),r=n.n(i);r.a},"9d6c":function(t,e,n){},a3fb:function(t,e,n){},a8aa:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-store"},[n("div",{staticClass:"my-store-container size-32 flex-row flex-start-center"},[n("div",{on:{click:t.handleClick}},[n("span",{staticClass:"my-store-name color-393D49"},[t._v(t._s(t.store.store_name))]),n("van-icon",{staticClass:"color-de",attrs:{name:t.arrow}})],1),t._t("default")],2),n("div",{staticClass:"border"}),n("div",[n("BottomPopup",{attrs:{columns:t.columns,"default-index":t.selectIndex,show:t.show},on:{"trigger-confirm":t.handleConfirm,"trigger-close":t.handleClose}})],1)])},r=[],s=(n("4de4"),n("d81d"),n("a9e3"),n("5530")),a=n("5594"),o=n("2f62"),l={name:"MyStore",components:{BottomPopup:a["a"]},props:{open:{default:!1,type:Boolean},defaultIndex:Number,storeId:[String,Number]},data:function(){return{show:!1,store:{store_name:"请选择门店"},selectIndex:null}},computed:Object(s["a"])(Object(s["a"])({},Object(o["d"])({storeList:function(t){return t.common.storeList}})),{},{columns:{get:function(){var t=this.storeList;return t.map((function(t){var e=Object(s["a"])({text:t.store_name},t);return e}))}},arrow:function(){return this.show?"arrow-up":"arrow-down"}}),watch:{storeList:{handler:function(t){var e=this.storeId,n=this.defaultIndex;if(t.length>0){if(e&&e>=0){var i=t.map((function(t,e){return Object(s["a"])(Object(s["a"])({},t),{},{index:e})})).filter((function(t){return t.store_id===String(e)}));if(i.length>0){var r=i[0];this.selectIndex=r.index,this.store=Object(s["a"])({},r)}}else n>=0&&(this.selectIndex=n,this.store=Object(s["a"])({},t[0]));(n>=0||e>=0)&&this.$emit("trigger-click",{value:Object(s["a"])(Object(s["a"])({},this.store),{},{index:this.selectIndex})})}},immediate:!0}},created:function(){0===this.storeList.length&&this.getStore()},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["COMMON_GETSTORE_ACTION"])),{},{handleClick:function(){this.show=!0},handleConfirm:function(t){var e=t.value,n=t.index;this.store=Object(s["a"])({},e),this.$emit("trigger-click",{value:e,index:n})},handleClose:function(){this.show=!1},getStore:function(){var t=this;this.COMMON_GETSTORE_ACTION().then((function(e){"0"!==e.return_code&&t.$Tip.warning(e.msg)}))}})},c=l,u=(n("48d0"),n("2877")),d=Object(u["a"])(c,i,r,!1,null,"de8e6c12",null),f=d.exports;e["a"]=f},adb4:function(t,e,n){"use strict";var i=n("24b0"),r=n.n(i);r.a},b02d:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hhf-input"},[n("div",{staticClass:"flex-row flex-between-center"},[n("div",{staticClass:"hhf-input-left"},[t._t("start"),n("div",{staticClass:"size-28 color-3 hhf-input-left-title"},[t._v(" "+t._s(t.$slots["title"]?null:t.title)+" "),t._t("title")],2)],2),n("div",{staticClass:"hhf-input-right"},[n("div",{class:["hhf-input-content size-28",t.width?null:"flex-1",t.border?"border":null],style:t.getInputStyle},[t.$slots["content"]?t._t("content"):n("input",{class:["hhf-input-entry",t.inputClass],style:{"text-align":t.position},attrs:{maxlength:t.maxlength,type:t.type,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("trigger-input",e.target.value)},focus:t.handleFocus,blur:function(e){return t.$emit("trigger-blur",e.target.value)}}})],2),[t.suffix?n("span",{staticClass:"size-28 color-3 padding-left-10"},[t._v(t._s(t.suffix))]):t._e(),t._t("suffix")]],2)]),[void 0!==t.errorText?n("div",{staticClass:"color-error size-20 height-err",style:t.errorStyle},[t._v(" "+t._s(t.errorText)+" ")]):t._e(),t._t("end")]],2)},r=[],s=(n("99af"),n("caad"),n("a9e3"),n("5530")),a=n("53ca"),o={name:"HhfInput",components:{},model:{prop:"value",event:"trigger-input"},props:{value:{default:""},placeholder:String,position:{default:"right",type:String},leftIcon:{default:"",type:String},rightIcon:{default:"",type:String},suffix:{type:String,default:""},title:{default:"",type:String},width:{type:String},border:{type:Boolean,default:!1},inputStyle:{type:String||Object,default:""},errorStyle:{type:String||Object,default:""},errorText:{type:String},inputClass:[String,Array],maxlength:Number,type:{default:"text",type:String,validator:function(t){return["text","number","tel"].includes(t)}}},data:function(){return{}},computed:{getInputStyle:function(){if("string"===typeof this.inputStyle){var t=this.width?"width:".concat(this.width,";"):"";return"".concat(this.inputStyle).concat(t)}return"object"===Object(a["a"])(this.inputStyle)?Object(s["a"])(Object(s["a"])({},this.inputStyle),{},{width:this.width}):{width:this.width}}},mounted:function(){},methods:{handleFocus:function(t){if(/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)&&!/(Win32)/i.test(navigator.platform)){var e=t.target;e.setSelectionRange&&e.setSelectionRange(e.value.length,e.value.length)}}}},l=o,c=(n("adb4"),n("2877")),u=Object(c["a"])(l,i,r,!1,null,null,null),d=u.exports;e["a"]=d},b049:function(t,e,n){"use strict";var i=n("ade3"),r=n("5530");e["a"]={data:function(){return{errObj:{}}},methods:{showErrFunc:function(t,e){this.errObj=Object(r["a"])(Object(r["a"])({},this.errObj),{},Object(i["a"])({},t,e))},judgeFunc:function(t){var e=t.key,n=t.value,i=t.range,r=i[0],s=i[1];this.showErrFunc(e,!(/^[0-9]+$/.test(String(n))&&n>=r&&n<=s||""===n))},judgeIntegerNotEmptyFunc:function(t){var e=t.key,n=t.value,i=t.range,r=i[0],s=i[1];this.showErrFunc(e,!(/^[0-9]+$/.test(String(n))&&n>=r&&n<=s))},judgeNumberNotEmptyFunc:function(t){var e=t.key,n=t.value,i=t.range,r=i[0],s=i[1];this.showErrFunc(e,!(/^[0-9]+(\.[0-9]{1,2})?$/.test(String(n))&&n>=r&&n<=s))}}}},b4ee:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{class:t.wrapClasses,style:t.styles,on:{click:t.handleClick}})},r=[],s=(n("99af"),n("b0c0"),n("d3b7"),n("ac1f"),n("25f0"),n("1276"),n("2909")),a={name:"HhfIcon",components:{},props:{classes:[Array,String],styles:Object,name:{type:String,required:!0}},data:function(){return{}},computed:{wrapClasses:function(){var t=["hhf-icon","hhf-iconfont","hhf-icon-".concat(this.name)];if("[object Array]"===Object.prototype.toString.call(this.classes))t=[].concat(Object(s["a"])(t),Object(s["a"])(this.classes));else if("string"===typeof this.classes){var e=this.classes.split(" ");t=[].concat(Object(s["a"])(t),Object(s["a"])(e))}return t}},mounted:function(){},methods:{handleClick:function(){this.$emit("trigger-click")}}},o=a,l=n("2877"),c=Object(l["a"])(o,i,r,!1,null,"0e833f38",null),u=c.exports;e["a"]=u},b624:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"bgcolor-f"},[n("MyStore",{on:{"trigger-click":t.handleConfirm}})],1),n("div",{staticClass:"margin-top-20"},[n("h5",{staticClass:"margin-0 padding-20-30 bgcolor-f size-0 flex-row flex-between-center"},[n("div",[n("span",{staticClass:"size-28"},[t._v("礼品列表")]),n("span",{staticClass:"size-24 color-7 padding-left-10"},[t._v("共"+t._s(t.typeNum)+"款，"+t._s(t.total.num)+"个，"+t._s(t.total.money_cost)+"元")])]),n("div",{staticClass:"padding-left-10"},[n("HhfButton",{attrs:{type:"info",size:"small",radius:"0.4rem"},on:{"trigger-click":t.handleGo}},[t._v("添加礼品")])],1)]),t._l(t.giftStorageList,(function(e){return n("div",{key:e.gift_id,staticClass:"margin-bottom-20"},[n("GiftStorageItem",{attrs:{result:e},on:{"trigger-delete":function(n){return t.GIFT_DELETEGIFTSTORAGELIST_MUTATE(e)}}})],1)}))],2),n("div",{staticClass:"height-100"},[n("div",{staticClass:"fixed-max-width bottom-0 size-0 zindex-2"},[n("HhfButton",{attrs:{type:"info",size:"large",loading:t.btnLoading},on:{"trigger-click":t.handleSubmit}},[t._v("提交")])],1)])])},r=[],s=(n("4160"),n("b680"),n("159b"),n("5530")),a=n("a8aa"),o=n("de0f"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bgcolor-f"},[n("GiftList",{attrs:{result:t.result}},[n("div",{staticClass:"flex-column flex-start-center"},[n("div",{on:{click:function(e){return t.handleDelete(t.result)}}},[n("van-icon",{staticClass:"size-40",attrs:{name:"delete"}})],1)])]),n("div",{staticClass:"border border-ebedf0"}),n("div",{staticClass:"padding-20-30-0"},[n("HhfInput",{attrs:{title:"成本单价（元）",placeholder:"请输入成本单价",type:"number"},on:{"trigger-blur":function(e){return t.handleBlur("money_cost")}},model:{value:t.result.money_cost,callback:function(e){t.$set(t.result,"money_cost",e)},expression:"result.money_cost"}}),n("div",{staticClass:"color-error size-24 text-right height-err margin-top-10"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.errObj.money_cost,expression:"errObj.money_cost"}]},[t._v("请填写0.01~999范围的数字")])])],1),n("div",{staticClass:"border border-ebedf0"}),n("div",{staticClass:"padding-20-30-0"},[n("HhfInput",{attrs:{title:"入库数量",placeholder:"请输入数量",type:"tel"},on:{"trigger-blur":function(e){return t.handleBlur("num")}},model:{value:t.result.num,callback:function(e){t.$set(t.result,"num",e)},expression:"result.num"}}),n("div",{staticClass:"color-error size-24 text-right height-err margin-top-10"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.errObj.num,expression:"errObj.num"}]},[t._v("请填写1~99999范围的整数")])])],1)],1)},c=[],u=n("b02d"),d=n("6ac7"),f=n("b049"),h={name:"GiftStorageItem",components:{HhfInput:u["a"],GiftList:d["a"]},mixins:[f["a"]],props:{result:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{},mounted:function(){},methods:{handleDelete:function(t){this.$emit("trigger-delete",t)},handleBlur:function(t){var e=this.result[t];"money_cost"===t?this.judgeNumberNotEmptyFunc({value:e,range:[.01,999],key:"money_cost"}):"num"===t&&this.judgeIntegerNotEmptyFunc({value:e,range:[1,99999],key:"num"})}}},g=h,m=n("2877"),p=Object(m["a"])(g,l,c,!1,null,"73d220f8",null),b=p.exports,v=b,y=n("365c"),_=n("2f62"),x={name:"AddGiftStorage",components:{HhfButton:o["a"],MyStore:a["a"],GiftStorageItem:v},data:function(){return{storeId:null,brandId:null,brandName:null,btnLoading:!1}},computed:Object(s["a"])(Object(s["a"])({},Object(_["d"])({giftStorageList:function(t){return t.gift.giftStorageList}})),{},{typeNum:function(){return this.giftStorageList.length},total:function(){var t=0,e=0;return this.giftStorageList.forEach((function(n){t+=n.num-0,e+=n.money_cost*n.num})),{num:t,money_cost:e.toFixed(2)}}}),methods:Object(s["a"])(Object(s["a"])({},Object(_["c"])(["GIFT_DELETEGIFTSTORAGELIST_MUTATE","GIFT_CLEARGIFTSTORAGELIST_MUTATE"])),{},{handleGo:function(){this.storeId?this.$router.push({name:"storege_gift_add_list",query:{sid:this.storeId,bid:this.brandId,brandname:this.brandName}}):this.$Tip.warning("请选择门店")},handleConfirm:function(t){this.storeId!==t.value.store_id&&(this.GIFT_CLEARGIFTSTORAGELIST_MUTATE(),this.brandId=t.value.brand_id,this.storeId=t.value.store_id,this.brandName=t.value.brand_name)},handleSubmit:function(){var t=this,e=[];if(this.storeId)if(0!==!this.giftStorageList.length){for(var n=0;n<this.giftStorageList.length;++n){var i=this.giftStorageList[n];if(!(/^[0-9]+(\.[0-9]{1,2})?$/.test(i.money_cost)&&i.money_cost>=.01&&i.money_cost<=999))return void this.$Tip.warning("成本单价数据不正确");if(!(/^[0-9]+$/.test(i.num)&&i.num>=1&&i.num<=99999))return void this.$Tip.warning("有礼品入库数量数据不正确");e.push({gift_id:i.gift_id,num:i.num,money_cost:i.money_cost})}this.btnLoading=!0,Object(y["c"])({data:e,store_id:this.storeId,totle_order_num:this.total.num}).then((function(e){if(t.btnLoading=!1,"0"===e.return_code){var n=t;t.GIFT_CLEARGIFTSTORAGELIST_MUTATE(),n.$Tip.success({message:"提交成功",mask:!0,close:function(){n.$router.push({name:"gift_storage_record"})}})}else e.msg&&t.$Tip.warning({mask:!0,message:e.msg})}))}else this.$Tip.warning("请添加礼品");else this.$Tip.warning("请选择门店")}})},w=x,C=Object(m["a"])(w,i,r,!1,null,"506d0940",null);e["default"]=C.exports},b680:function(t,e,n){"use strict";var i=n("23e7"),r=n("a691"),s=n("408a"),a=n("1148"),o=n("d039"),l=1..toFixed,c=Math.floor,u=function(t,e,n){return 0===e?n:e%2===1?u(t,e-1,n*t):u(t*t,e/2,n)},d=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},f=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){l.call({})}));i({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,n,i,o,l=s(this),f=r(t),h=[0,0,0,0,0,0],g="",m="0",p=function(t,e){var n=-1,i=e;while(++n<6)i+=t*h[n],h[n]=i%1e7,i=c(i/1e7)},b=function(t){var e=6,n=0;while(--e>=0)n+=h[e],h[e]=c(n/t),n=n%t*1e7},v=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==h[t]){var n=String(h[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(g="-",l=-l),l>1e-21)if(e=d(l*u(2,69,1))-69,n=e<0?l*u(2,-e,1):l/u(2,e,1),n*=4503599627370496,e=52-e,e>0){p(0,n),i=f;while(i>=7)p(1e7,0),i-=7;p(u(10,i,1),0),i=e-1;while(i>=23)b(1<<23),i-=23;b(1<<i),p(1,1),b(2),m=v()}else p(0,n),p(1<<-e,0),m=v()+a.call("0",f);return f>0?(o=m.length,m=g+(o<=f?"0."+a.call("0",f-o)+m:m.slice(0,o-f)+"."+m.slice(o-f))):m=g+m,m}})},de0f:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["size-0",t.getBottomZIndexCls]},[n("div",{class:t.wrapClasses,style:t.wrapStyles,on:{click:t.handleClick}},[n("div",{staticClass:"hhf-button-container flex-row flex-center"},[!t.$slots.loading&&t.loading?[n("div",{staticClass:"hhf-button-loading-container"},[n("div",{staticClass:"hhf-button-loading-content"},[n("HhfIcon",{attrs:{name:"spinner-loading"}})],1)])]:t.loading?[t._t("loading")]:t._e(),t._t("default")],2)])])},r=[],s=(n("99af"),n("caad"),n("a9e3"),n("d3b7"),n("ac1f"),n("25f0"),n("1276"),n("5530")),a=n("b4ee"),o={name:"",components:{HhfIcon:a["a"]},props:{disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"加载中…"},text:{type:String,default:"确定"},bottomZIndex:{type:Number},radius:String,activeColor:Object,plain:Boolean,type:{type:String,default:"default",validator:function(t){return["default","primary","success","info","warning","danger"].includes(t)}},size:{type:String,default:"normal",validator:function(t){return["normal","large","small","mini","custom"].includes(t)}},classes:[String,Array],styles:Object},data:function(){return{}},computed:{getBottomZIndexCls:function(){return this.bottomZIndex?"hhf-button-".concat(this.size,"-height"):null},wrapClasses:function(){var t=this.classes,e=this.size,n=this.type,i=this.plain,r=this.loading,s=this.disabled,a=this.bottomZIndex,o=["hhf-button","hhf-button-".concat(n),"hhf-button-".concat(e),a?"hhf-button-".concat(e,"-fixed"):null];if("[object Array]"===Object.prototype.toString.call(t))o=o.concat(t);else if("string"===typeof t){var l=t.split(" ");o=o.concat(l)}return i&&o.push("hhf-button-plain"),r&&o.push("hhf-button-loading"),s&&o.push("hhf-button-disabled"),o},wrapStyles:function(){var t=this.styles,e=this.radius,n=this.bottomZIndex,i=Object(s["a"])(Object(s["a"])({},t),{},{borderRadius:e,zIndex:n});return i}},mounted:function(){},methods:{handleClick:function(){var t=this.loading,e=this.disabled;t||e||this.$emit("trigger-click")}}},l=o,c=(n("048b"),n("2877")),u=Object(c["a"])(l,i,r,!1,null,null,null),d=u.exports;e["a"]=d}}]);