(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["FreeInfiniteGrasp"],{"48d0":function(e,t,n){"use strict";var i=n("9d6c"),a=n.n(i);a.a},"51b3":function(e,t,n){},5594:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bottom-popup"},[n("van-popup",{attrs:{position:"bottom","close-on-click-overlay":e.maskClose,overlay:e.overlay},on:{"click-overlay":e.handleClose},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:e.columns,"default-index":e.defaultIndex},on:{change:e.handleChange,cancel:e.handleCancel,confirm:e.handleConfirm}})],1)],1)},a=[],s=(n("a9e3"),{name:"BottomPopup",components:{},props:{maskClose:{type:Boolean,default:!1},columns:{default:function(){return[]},type:Array},overlay:{default:!0,type:Boolean},show:{default:!1,type:Boolean},defaultIndex:Number},data:function(){return{loading:!0}},computed:{},watch:{columns:{handler:function(){this.loading=!1}}},mounted:function(){},methods:{handleCancel:function(){this.$emit("trigger-cancel"),this.handleClose()},handleConfirm:function(e,t){this.$emit("trigger-confirm",{value:e,index:t}),this.handleClose()},handleClose:function(){this.$emit("trigger-close")},handleChange:function(){}}}),o=s,r=n("2877"),c=Object(r["a"])(o,i,a,!1,null,"2f72655a",null),l=c.exports;t["a"]=l},"5bdd":function(e,t,n){},7034:function(e,t,n){"use strict";var i=n("b1f0"),a=n.n(i);a.a},8416:function(e,t,n){"use strict";var i=n("51b3"),a=n.n(i);a.a},"9d6c":function(e,t,n){},a8aa:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-store"},[n("div",{staticClass:"my-store-container size-32 flex-row flex-start-center"},[n("div",{on:{click:e.handleClick}},[n("span",{staticClass:"my-store-name color-393D49"},[e._v(e._s(e.store.store_name))]),n("van-icon",{staticClass:"color-de",attrs:{name:e.arrow}})],1),e._t("default")],2),n("div",{staticClass:"border"}),n("div",[n("BottomPopup",{attrs:{columns:e.columns,"default-index":e.selectIndex,show:e.show},on:{"trigger-confirm":e.handleConfirm,"trigger-close":e.handleClose}})],1)])},a=[],s=(n("4de4"),n("d81d"),n("a9e3"),n("5530")),o=n("5594"),r=n("2f62"),c={name:"MyStore",components:{BottomPopup:o["a"]},props:{open:{default:!1,type:Boolean},defaultIndex:Number,storeId:[String,Number]},data:function(){return{show:!1,store:{store_name:"请选择门店"},selectIndex:null}},computed:Object(s["a"])(Object(s["a"])({},Object(r["d"])({storeList:function(e){return e.common.storeList}})),{},{columns:{get:function(){var e=this.storeList;return e.map((function(e){var t=Object(s["a"])({text:e.store_name},e);return t}))}},arrow:function(){return this.show?"arrow-up":"arrow-down"}}),watch:{storeList:{handler:function(e){var t=this.storeId,n=this.defaultIndex;if(e.length>0){if(t&&t>=0){var i=e.map((function(e,t){return Object(s["a"])(Object(s["a"])({},e),{},{index:t})})).filter((function(e){return e.store_id===String(t)}));if(i.length>0){var a=i[0];this.selectIndex=a.index,this.store=Object(s["a"])({},a)}}else n>=0&&(this.selectIndex=n,this.store=Object(s["a"])({},e[0]));(n>=0||t>=0)&&this.$emit("trigger-click",{value:Object(s["a"])(Object(s["a"])({},this.store),{},{index:this.selectIndex})})}},immediate:!0}},created:function(){0===this.storeList.length&&this.getStore()},methods:Object(s["a"])(Object(s["a"])({},Object(r["b"])(["COMMON_GETSTORE_ACTION"])),{},{handleClick:function(){this.show=!0},handleConfirm:function(e){var t=e.value,n=e.index;this.store=Object(s["a"])({},t),this.$emit("trigger-click",{value:t,index:n})},handleClose:function(){this.show=!1},getStore:function(){var e=this;this.COMMON_GETSTORE_ACTION().then((function(t){"0"!==t.return_code&&e.$Tip.warning(t.msg)}))}})},l=c,d=(n("48d0"),n("2877")),u=Object(d["a"])(l,i,a,!1,null,"de8e6c12",null),f=u.exports;t["a"]=f},ae0a:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loading-img flex-row flex-center",style:e.wrapStyl},[e.img?n("van-image",{attrs:{src:e.thumb||e.img,"lazy-load":"",fit:e.fit},on:{click:function(t){return e.handleClick(t,e.img)}},scopedSlots:e._u([{key:"loading",fn:function(){return[n("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!1,2352118052)}):e._e()],1)},a=[],s=(n("a9e3"),n("5530")),o=n("2f62"),r={name:"LoadingImg",components:{},props:{img:{type:String},thumb:{type:String},fit:{type:String},width:Number||String,height:Number||String,radius:Number||String,magnify:{type:Boolean,default:!1}},data:function(){return{showErr:!1}},computed:{wrapStyl:function(){var e=this.width,t=this.height,n=this.radius;return e="number"===typeof e?"".concat(e,"px"):e,t="number"===typeof t?"".concat(t,"px"):t,n="number"===typeof n?"".concat(n,"px"):n,{width:e,height:t,"border-radius":n}}},methods:Object(s["a"])(Object(s["a"])({},Object(o["c"])(["APP_IMAGEPREVIEW_MUTATE"])),{},{handleClick:function(e,t){this.magnify&&this.APP_IMAGEPREVIEW_MUTATE({previewImage:[t],imagePreviewShow:!0})}})},c=r,l=(n("ebc4"),n("2877")),d=Object(l["a"])(c,i,a,!1,null,null,null);t["a"]=d.exports},b1f0:function(e,t,n){},ebc4:function(e,t,n){"use strict";var i=n("5bdd"),a=n.n(i);a.a},fc78:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"handleConfirm"},[n("div",{staticClass:"header bgcolor-f"},[n("MyStore",{attrs:{"default-index":0,"store-id":e.store_id},on:{"trigger-click":e.handleConfirm}},[n("div",{staticClass:"flex-row flex-end-center flex-1"},[n("van-icon",{attrs:{name:"question-o",size:"0.4rem"},on:{click:e.handleRouter}})],1)])],1),n("div",{staticClass:"main-container"},[n("div",{staticClass:"handleConfirm-container bgcolor-f2"},[n("div",{staticClass:"border"}),n("van-pull-refresh",{staticClass:"handleConfirm-fresh",on:{refresh:e.handleRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[n("div",{staticClass:"size-28 color-3 padding-20 bgcolor-f",staticStyle:{"line-height":"1.5"}},[e._v(" 我的机台 ")]),n("van-collapse",{staticClass:"handleConfirm-content bgcolor-f2",attrs:{accordion:""},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.list,(function(t,i){return n("van-collapse-item",{key:t.area_id,attrs:{title:t.area_name||"",name:i}},e._l(t.items,(function(e){return n("div",{key:e.machine_id,staticClass:"bgcolor-f"},[n("FreeGraspCell",{attrs:{info:e}}),n("div",{staticClass:"border"})],1)})),0)})),1)],1)],1)])])},a=[],s=(n("d81d"),n("5530")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"padding-20-30 flex-row flex-between-center free-grasp-cell bgcolor-f"},[n("div",{staticClass:"flex-column flex-start-stretch free-grasp-cell-left"},[n("LoadingImg",{staticClass:"free-grasp-cell-img",attrs:{img:e.info.img}})],1),n("div",{staticClass:"flex-column flex-between-start"},[n("h5",{staticClass:"size-26"},[e._v(e._s(e.info.name)+"-"+e._s(e.info.no))]),n("div",{staticClass:"flex-row flex-between-center"},[n("van-switch",{attrs:{loading:e.loading},on:{change:e.handleChange},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),n("span",{staticClass:"padding-left-30 size-26"},[e._v(e._s(e.switchName))])],1)])])},r=[],c=n("ae0a"),l=n("365c"),d={name:"FreeGraspCell",components:{LoadingImg:c["a"]},props:{info:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,switchName:"关",checked:!1}},computed:{},watch:{info:{handler:function(e){this.checked=e.checked,this.switchName=e.checked?"开":"关"},immediate:!0}},mounted:function(){},methods:{handleChange:function(e){var t=this;this.loading=!0,this.$emit("trigger-change",e),Object(l["hb"])({machine_id:this.info.machine_id,action:e-0}).then((function(n){"0"===n.return_code?(t.switchName=e?"开":"关",t.loading=!1):t.$Tip.warning(n.msg)}))}}},u=d,f=(n("7034"),n("2877")),h=Object(f["a"])(u,o,r,!1,null,"0ccfb131",null),m=h.exports,g=n("a8aa"),p={name:"Switchgear",components:{MyStore:g["a"],FreeGraspCell:m},data:function(){return{activeNames:0,list:[],checked:!0,isLoading:!1,store_id:null}},computed:{},created:function(){var e=this.$route.query.sid;e&&(this.store_id=e)},mounted:function(){},methods:{getList:function(){var e=this;return this.$Loading("加载中……"),Object(l["u"])({store_id:this.store_id}).then((function(t){e.$Loading.close(),"0"===t.return_code?e.list=t.data.map((function(e){return e.items=e.items.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{checked:!!(e.free_grasp-0)})})),e})):e.$Tip.warning(t.msg)}))},handleConfirm:function(e){this.store_id=e.value.store_id,this.getList()},handleRouter:function(){this.$router.push({name:"Article"})},handleRefresh:function(){var e=this;this.getList().then((function(){e.isLoading=!1}))}}},v=p,b=(n("8416"),Object(f["a"])(v,i,a,!1,null,null,null));t["default"]=b.exports}}]);