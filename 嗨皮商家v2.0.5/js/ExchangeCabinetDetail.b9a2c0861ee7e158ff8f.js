(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ExchangeCabinetDetail"],{"048b":function(t,e,i){"use strict";var n=i("40ec"),a=i.n(n);a.a},"097b":function(t,e,i){"use strict";var n=i("21f1"),a=i.n(n);a.a},"21f1":function(t,e,i){},"24b0":function(t,e,i){},"380a":function(t,e,i){"use strict";var n=i("a0af"),a=i.n(n);a.a},"40ec":function(t,e,i){},"5bdd":function(t,e,i){},"6ac7":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex-row flex-between-stretch size-28 color-393d49 gift-list bgcolor-f",on:{click:function(e){return t.handleClick(t.result)}}},[void 0!==t.checked?i("div",{staticClass:"gift-list-check flex-row flex-center"},[i("van-checkbox",{attrs:{name:t.result.gift_id},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1):t._e(),i("div",{staticClass:"flex-1 flex-row flex-between-stretch"},[i("div",{staticClass:"flex-row flex-start-stretch"},[t.result.thumb||t.result.gift_img?i("div",{staticClass:"gift-list-img bgcolor-f2 flex-row flex-center"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.result.thumb||t.result.gift_img,expression:"result.thumb || result.gift_img"}],staticClass:"gift-list-img-content",on:{click:function(e){return e.stopPropagation(),t.APP_IMAGEPREVIEW_MUTATE({previewImage:[t.result.img],imagePreviewShow:!0})}}})]):t._e(),i("div",{staticClass:"flex-column flex-center-start"},[i("span",{staticClass:"color-393d49 size-30 weight-bold padding-bottom-20 max-width-400 text-ellipsis text-break text-justify"},[t._v(t._s(t.result.gift_name))]),i("span",{staticClass:"size-28 color-454545"},[t._v("编号"+t._s(t.result.gift_id))])])]),t._t("default")],2)])},a=[],s=i("5530"),l=i("2f62"),r={name:"GiftList",components:{},props:{result:{type:Object}},data:function(){return{}},computed:{checked:{get:function(){return this.result.checked},set:function(t){this.$emit("trigger-click",Object(s["a"])(Object(s["a"])({},this.result),{},{checked:t}))}}},methods:Object(s["a"])(Object(s["a"])({},Object(l["c"])(["APP_IMAGEPREVIEW_MUTATE"])),{},{handleClick:function(){this.$emit("trigger-click",Object(s["a"])(Object(s["a"])({},this.result),{},{checked:!this.result.checked}))}})},o=r,c=(i("9388"),i("2877")),u=Object(c["a"])(o,n,a,!1,null,"5938b618",null),d=u.exports;e["a"]=d},9388:function(t,e,i){"use strict";var n=i("a3fb"),a=i.n(n);a.a},"9c5c":function(t,e,i){},"9c7f":function(t,e,i){"use strict";var n=i("9c5c"),a=i.n(n);a.a},a0af:function(t,e,i){},a3fb:function(t,e,i){},a5ab:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cell-list flex-row flex-between-center padding-20-30",on:{click:t.handleClick}},[i("div",{staticClass:"cell-list-title size-28 color-3"},[t._v(" "+t._s(t.$slots["title"]?null:t.title)+" "),t._t("title")],2),i("div",{staticClass:"size-28 flex-row flex-start-center"},[t.value?i("span",[t._v(t._s(t.value))]):i("span",{staticClass:"cell-list-placeholder"},[t._v(t._s(t.placeholder))]),t.rightIcon?i("van-icon",{staticClass:"flex-row flex-center margin-left-10 size-32",attrs:{color:"#969799",name:t.rightIcon}}):t._e(),t._t("rigth-icon")],2)])},a=[],s={name:"CellList",components:{},props:{title:String,value:String,placeholder:String,leftIcon:{type:Boolean,default:!1},rightIcon:{type:String}},data:function(){return{}},computed:{},mounted:function(){},methods:{handleClick:function(t){this.$emit("trigger-click",t)}}},l=s,r=(i("097b"),i("2877")),o=Object(r["a"])(l,n,a,!1,null,null,null),c=o.exports;e["a"]=c},adb4:function(t,e,i){"use strict";var n=i("24b0"),a=i.n(n);a.a},ae0a:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loading-img flex-row flex-center",style:t.wrapStyl},[t.img?i("van-image",{attrs:{src:t.thumb||t.img,"lazy-load":"",fit:t.fit},on:{click:function(e){return t.handleClick(e,t.img)}},scopedSlots:t._u([{key:"loading",fn:function(){return[i("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!1,2352118052)}):t._e()],1)},a=[],s=(i("a9e3"),i("5530")),l=i("2f62"),r={name:"LoadingImg",components:{},props:{img:{type:String},thumb:{type:String},fit:{type:String},width:Number||String,height:Number||String,radius:Number||String,magnify:{type:Boolean,default:!1}},data:function(){return{showErr:!1}},computed:{wrapStyl:function(){var t=this.width,e=this.height,i=this.radius;return t="number"===typeof t?"".concat(t,"px"):t,e="number"===typeof e?"".concat(e,"px"):e,i="number"===typeof i?"".concat(i,"px"):i,{width:t,height:e,"border-radius":i}}},methods:Object(s["a"])(Object(s["a"])({},Object(l["c"])(["APP_IMAGEPREVIEW_MUTATE"])),{},{handleClick:function(t,e){this.magnify&&this.APP_IMAGEPREVIEW_MUTATE({previewImage:[e],imagePreviewShow:!0})}})},o=r,c=(i("ebc4"),i("2877")),u=Object(c["a"])(o,n,a,!1,null,null,null);e["a"]=u.exports},b02d:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hhf-input"},[i("div",{staticClass:"flex-row flex-between-center"},[i("div",{staticClass:"hhf-input-left"},[t._t("start"),i("div",{staticClass:"size-28 color-3 hhf-input-left-title"},[t._v(" "+t._s(t.$slots["title"]?null:t.title)+" "),t._t("title")],2)],2),i("div",{staticClass:"hhf-input-right"},[i("div",{class:["hhf-input-content size-28",t.width?null:"flex-1",t.border?"border":null],style:t.getInputStyle},[t.$slots["content"]?t._t("content"):i("input",{class:["hhf-input-entry",t.inputClass],style:{"text-align":t.position},attrs:{maxlength:t.maxlength,type:t.type,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("trigger-input",e.target.value)},focus:t.handleFocus,blur:function(e){return t.$emit("trigger-blur",e.target.value)}}})],2),[t.suffix?i("span",{staticClass:"size-28 color-3 padding-left-10"},[t._v(t._s(t.suffix))]):t._e(),t._t("suffix")]],2)]),[void 0!==t.errorText?i("div",{staticClass:"color-error size-20 height-err",style:t.errorStyle},[t._v(" "+t._s(t.errorText)+" ")]):t._e(),t._t("end")]],2)},a=[],s=(i("99af"),i("caad"),i("a9e3"),i("5530")),l=i("53ca"),r={name:"HhfInput",components:{},model:{prop:"value",event:"trigger-input"},props:{value:{default:""},placeholder:String,position:{default:"right",type:String},leftIcon:{default:"",type:String},rightIcon:{default:"",type:String},suffix:{type:String,default:""},title:{default:"",type:String},width:{type:String},border:{type:Boolean,default:!1},inputStyle:{type:String||Object,default:""},errorStyle:{type:String||Object,default:""},errorText:{type:String},inputClass:[String,Array],maxlength:Number,type:{default:"text",type:String,validator:function(t){return["text","number","tel"].includes(t)}}},data:function(){return{}},computed:{getInputStyle:function(){if("string"===typeof this.inputStyle){var t=this.width?"width:".concat(this.width,";"):"";return"".concat(this.inputStyle).concat(t)}return"object"===Object(l["a"])(this.inputStyle)?Object(s["a"])(Object(s["a"])({},this.inputStyle),{},{width:this.width}):{width:this.width}}},mounted:function(){},methods:{handleFocus:function(t){if(/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)&&!/(Win32)/i.test(navigator.platform)){var e=t.target;e.setSelectionRange&&e.setSelectionRange(e.value.length,e.value.length)}}}},o=r,c=(i("adb4"),i("2877")),u=Object(c["a"])(o,n,a,!1,null,null,null),d=u.exports;e["a"]=d},b4ee:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{class:t.wrapClasses,style:t.styles,on:{click:t.handleClick}})},a=[],s=(i("99af"),i("b0c0"),i("d3b7"),i("ac1f"),i("25f0"),i("1276"),i("2909")),l={name:"HhfIcon",components:{},props:{classes:[Array,String],styles:Object,name:{type:String,required:!0}},data:function(){return{}},computed:{wrapClasses:function(){var t=["hhf-icon","hhf-iconfont","hhf-icon-".concat(this.name)];if("[object Array]"===Object.prototype.toString.call(this.classes))t=[].concat(Object(s["a"])(t),Object(s["a"])(this.classes));else if("string"===typeof this.classes){var e=this.classes.split(" ");t=[].concat(Object(s["a"])(t),Object(s["a"])(e))}return t}},mounted:function(){},methods:{handleClick:function(){this.$emit("trigger-click")}}},r=l,o=i("2877"),c=Object(o["a"])(r,n,a,!1,null,"0e833f38",null),u=c.exports;e["a"]=u},d239:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex-row flex-between-center bgcolor-f2 header-search"},[i("form",{staticClass:"flex-1",attrs:{action:"javascript:return true"}},[i("van-search",{staticClass:"header-search-content",attrs:{value:t.value,placeholder:t.placeholder,background:"#f2f2f2"},on:{input:t.handleInput,search:t.handleSearch}})],1),t.filter?i("div",{staticClass:"header-search-filter color-2f4056"},[i("van-icon",{attrs:{name:"filter-o"},on:{click:t.handleClick}})],1):t._e()])},a=[],s={name:"HeaderSearch",components:{},model:{event:"trigger-input"},props:{value:{default:""},filter:{type:Boolean,default:!1},status:{type:Boolean,default:!1},placeholder:String},data:function(){return{}},mounted:function(){},methods:{handleSearch:function(){this.$emit("trigger-search",this.value)},handleInput:function(t){this.$emit("trigger-input",t)},handleClick:function(){this.$emit("trigger-click")}}},l=s,r=(i("380a"),i("2877")),o=Object(r["a"])(l,n,a,!1,null,null,null),c=o.exports;e["a"]=c},de0f:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["size-0",t.getBottomZIndexCls]},[i("div",{class:t.wrapClasses,style:t.wrapStyles,on:{click:t.handleClick}},[i("div",{staticClass:"hhf-button-container flex-row flex-center"},[!t.$slots.loading&&t.loading?[i("div",{staticClass:"hhf-button-loading-container"},[i("div",{staticClass:"hhf-button-loading-content"},[i("HhfIcon",{attrs:{name:"spinner-loading"}})],1)])]:t.loading?[t._t("loading")]:t._e(),t._t("default")],2)])])},a=[],s=(i("99af"),i("caad"),i("a9e3"),i("d3b7"),i("ac1f"),i("25f0"),i("1276"),i("5530")),l=i("b4ee"),r={name:"",components:{HhfIcon:l["a"]},props:{disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"加载中…"},text:{type:String,default:"确定"},bottomZIndex:{type:Number},radius:String,activeColor:Object,plain:Boolean,type:{type:String,default:"default",validator:function(t){return["default","primary","success","info","warning","danger"].includes(t)}},size:{type:String,default:"normal",validator:function(t){return["normal","large","small","mini","custom"].includes(t)}},classes:[String,Array],styles:Object},data:function(){return{}},computed:{getBottomZIndexCls:function(){return this.bottomZIndex?"hhf-button-".concat(this.size,"-height"):null},wrapClasses:function(){var t=this.classes,e=this.size,i=this.type,n=this.plain,a=this.loading,s=this.disabled,l=this.bottomZIndex,r=["hhf-button","hhf-button-".concat(i),"hhf-button-".concat(e),l?"hhf-button-".concat(e,"-fixed"):null];if("[object Array]"===Object.prototype.toString.call(t))r=r.concat(t);else if("string"===typeof t){var o=t.split(" ");r=r.concat(o)}return n&&r.push("hhf-button-plain"),a&&r.push("hhf-button-loading"),s&&r.push("hhf-button-disabled"),r},wrapStyles:function(){var t=this.styles,e=this.radius,i=this.bottomZIndex,n=Object(s["a"])(Object(s["a"])({},t),{},{borderRadius:e,zIndex:i});return n}},mounted:function(){},methods:{handleClick:function(){var t=this.loading,e=this.disabled;t||e||this.$emit("trigger-click")}}},o=r,c=(i("048b"),i("2877")),u=Object(c["a"])(o,n,a,!1,null,null,null),d=u.exports;e["a"]=d},ebc4:function(t,e,i){"use strict";var n=i("5bdd"),a=i.n(n);a.a},efef:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"flex-row flex-between-center bgcolor-f"},[i("CellList",{staticClass:"flex-1",attrs:{title:"柜门编号",value:t.hole_id}}),i("HhfButton",{attrs:{type:"info",size:"small",loading:t.loading,radius:"0.05rem"},on:{"trigger-click":t.handleOpenDoor}},[t._v("点击开门")])],1),i("div",{staticClass:"bgcolor-f margin-top-20"},[i("div",{staticClass:"border"}),i("CellList",{staticClass:"bgcolor-f flex-1",attrs:{title:"在售礼品","right-icon":"arrow",value:t.giftValue},on:{"trigger-click":function(e){t.giftShow=!0}}}),i("div",{staticClass:"border"}),i("div",{staticClass:"padding-20-30"},[i("HhfInput",{staticClass:"color-input",attrs:{title:"礼品可兑换数",type:"tel",placeholder:"请输入礼品兑换数"},model:{value:t.gift_num,callback:function(e){t.gift_num=e},expression:"gift_num"}})],1)],1),i("div",{staticClass:"flex-row flex-start-center margin-top-20 size-0",staticStyle:{width:"200px"}},[i("LoadingImg",{attrs:{img:t.gift_img,thumb:t.gift_img,magnify:""}})],1),i("div",{staticClass:"fixed-max-width bottom-0"},[i("HhfButton",{attrs:{type:"info",size:"large"},on:{"trigger-click":t.handleConfirm}},[t._v("确定")])],1),i("StoreGiftPopup",{attrs:{storeId:t.storeId},on:{"trigger-confirm":t.handleChooseGift},model:{value:t.giftShow,callback:function(e){t.giftShow=e},expression:"giftShow"}})],1)},a=[],s=(i("99af"),i("a5ab")),l=i("b02d"),r=i("ae0a"),o=i("de0f"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-popup",{staticClass:"store-gift-popup bgcolor-f2",attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("div",{staticClass:"store-gift-popup-header"},[i("div",{staticClass:"fixed-max-width top-0"},[i("HeaderSearch",{attrs:{placeholder:"请输入礼品名称或编号"},on:{"trigger-search":t.handleSearch},model:{value:t.giftSearch,callback:function(e){t.giftSearch=e},expression:"giftSearch"}}),i("div",{staticClass:"border"})],1)]),i("van-pull-refresh",{staticStyle:{overflow:"initial"},on:{refresh:t.handleRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了",offset:10},on:{load:t.handleLoading},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,n){return i("div",{key:n},[i("GiftList",{attrs:{result:e},on:{"trigger-click":t.handleChecked}}),i("div",{staticClass:"border"})],1)})),0)],1),i("div",{staticClass:"height-100"},[i("div",{staticClass:"fixed-max-width bottom-0 size-0 zindex-2"},[i("HhfButton",{attrs:{type:"info",size:"large"},on:{"trigger-click":t.handleAdd}},[t._v("添加")])],1)])],1)},u=[],d=(i("4de4"),i("caad"),i("d81d"),i("5530")),f=i("d239"),h=i("6ac7"),g=i("365c"),p={name:"StoregeGiftAddList",components:{HeaderSearch:f["a"],HhfButton:o["a"],GiftList:h["a"]},model:{event:"close",prop:"show"},props:{type:{type:String,default:"radio",validator:function(t){return["checkbox","radio"].includes(t)}},show:{type:Boolean,default:!1},storeId:{type:String}},data:function(){return{list:[],isLoading:!1,loading:!1,finished:!0,giftSearch:"",page:1}},computed:{},mounted:function(){this.handleLoading()},methods:{handleSearch:function(){var t=this;this.page=1,this.getGiftCreateList((function(e){t.list=e}))},getGiftCreateList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.$Loading({message:"加载中..."});var i=this.page,n=this.giftSearch,a=this.storeId;Object(g["M"])({gift_name:n,store_id:a,page:i,limit:20}).then((function(n){var a=[];t.$Loading.clear(),"0"===n.return_code?(t.page=++i,a=n.data.map((function(t){return Object(d["a"])(Object(d["a"])({},t),{},{checked:!1})}))):n.msg&&t.$Tip.warning({mask:!0,message:n.msg}),e(a)}))},handleRefresh:function(){var t=this;this.page=1,this.getGiftCreateList((function(e){t.list=e,t.isLoading=!1}))},handleLoading:function(){var t=this;this.getGiftCreateList((function(e){t.list=t.list.concat(e),t.finished=0===e.length,t.loading=!1}))},handleChecked:function(t){var e=this.type;this.list=this.list.map((function(i){var n=Object(d["a"])({},i);return t.gift_id===i.gift_id?n.checked=t.checked:"radio"===e&&(n.checked=!1),n}))},handleClose:function(){this.$emit("close",!1)},handleAdd:function(){this.$emit("trigger-confirm",this.list.filter((function(t){return t.checked}))),this.handleClose()}}},m=p,v=(i("9c7f"),i("2877")),b=Object(v["a"])(m,c,u,!1,null,"8cd5640e",null),_=b.exports,x={name:"ExchangeCabinetDetail",components:{CellList:s["a"],HhfButton:o["a"],LoadingImg:r["a"],HhfInput:l["a"],StoreGiftPopup:_},data:function(){return{giftShow:!1,storeId:"",hole_id:"",hole_no:"",gift_img:"",gift_id:"",gift_name:"",gift_num:"",mid:"",loading:!1}},computed:{giftValue:function(){return"".concat(this.gift_name,"(").concat(this.gift_id,")")}},created:function(){this.getExchangeCabinetDetail()},mounted:function(){},methods:{getExchangeCabinetDetail:function(){var t=this;this.$Loading("正在加载中……");var e=this.$route.query,i=e.mid,n=e.hid,a=e.sid;this.mid=i,this.storeId=a,Object(g["r"])({mid:i,hole_id:n}).then((function(e){if(t.$Loading.clear(),e&&"0"===e.return_code){var i=e.data;t.hole_id=i.hole_id,t.hole_no=i.hole_no,t.gift_img=i.gift_img,t.gift_id=i.gift_id,t.gift_num=i.gift_num,t.gift_name=i.gift_name}}))},handleAddMore:function(){},handleOpenDoor:function(){var t=this;this.$Loading("正在开门……"),Object(g["Z"])({mid:this.mid,hole_no:this.hole_no}).then((function(e){t.$Loading.clear(),"0"!==e.return_code?t.$Tip.warning(e.msg):t.$Tip.success(e.msg)}))},handleChooseGift:function(t){if(t.length>0){var e=t[0];this.gift_id=e.gift_id,this.gift_name=e.gift_name,this.gift_img=e.gift_img}},handleConfirm:function(){var t=this;this.$Loading("正在提交中……"),Object(g["mb"])({hole_id:this.hole_id,gift_id:this.gift_id,gift_num:this.gift_num}).then((function(e){t.$Loading.clear(),"0"!==e.return_code?t.$Tip.warning(e.msg):t.$Tip.success(e.msg)}))}}},y=x,C=Object(v["a"])(y,n,a,!1,null,null,null);e["default"]=C.exports}}]);