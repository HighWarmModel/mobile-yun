(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["MyMachine"],{"29d9":function(t,e,n){},"3c5e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-machine bgcolor-f2 main-body"},[n("div",{staticClass:"my-machine-header bgcolor-f"},[n("MyStore",{attrs:{"store-id":t.store_id,"default-index":0},on:{"trigger-click":t.handleConfirm}})],1),n("div",{staticClass:"main-container"},[n("div",{staticClass:"my-machine-container bgcolor-f2"},[n("div",{staticClass:"border"}),n("van-pull-refresh",{staticClass:"my-machine-fresh",on:{refresh:t.handleRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("van-collapse",{staticClass:"my-machine-content",model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[n("van-collapse-item",{attrs:{title:"我的机台",name:0}},[n("MachineList",{attrs:{columns:t.columns}})],1)],1)],1)],1)])])},a=[],s=n("a8aa"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"machine-list"},t._l(t.record,(function(e,i){return n("dl",{key:i,staticClass:"machine-list-container"},[n("dt",{staticClass:"size-28 color-3 machine-list-place"},[t._v(" "+t._s(e.area_name)+"（"+t._s(e.intro)+"） ")]),n("dd",{staticClass:"machine-list-main bgcolor-f2"},[n("ul",{staticClass:"machine-list-content"},t._l(e.items,(function(e){return n("li",{key:e.machine_id,staticClass:"machine-list-panel"},[n("div",{staticClass:"bgcolor-f machine-list-panel-container",on:{click:function(n){return t.handleHref({machineId:e.machine_id,machineType:e.machine_type,parentId:e.parent_id,giftId:e.gift_id,giftIdBak:e.gift_id_bak})}}},[n("div",{staticClass:"machine-list-img bgcolor-f2 flex-row flex-center"},[n("div",{staticClass:"machine-list-tag color-ff5722 size-24"},[n("van-tag",{attrs:{color:"1"===e.status_type?"#5fb878":"#ff5722",size:"large"}},[t._v(t._s(e.MACHINE_STATUS))])],1),n("img",{staticClass:"machine-list-img-content",attrs:{src:e.img,alt:""}})]),n("div",{staticClass:"machine-list-substance"},[n("p",[n("span",{staticClass:"weight-bold size-28 color-3"},[t._v(t._s(e.name)+"-"+t._s(e.no))]),n("span",{staticClass:"size-24 color-9 machine-list-panel-number"},[t._v("("+t._s(e.machine_id)+")")])]),n("p",{staticClass:"flex-row flex-between-center"},[n("span",{staticClass:"size-24 color-9"},[t._v(t._s(e.type_name))]),n("span",{staticClass:"size-28 color-ff0000 weight-bold"},[t._v(t._s(e.coins_sell))])])])])])})),0)])])})),0)},c=[],r=(n("d81d"),n("5530")),l=n("5171"),d={name:"",components:{},props:{columns:{default:function(){return[]},type:Array}},data:function(){return{}},computed:{record:function(){return this.columns.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{items:t.items.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{MACHINE_STATUS:l["g"][t.status_type],MACHINE_TYPE:l["h"][t.machine_type],coins_sell:t.coins_sell?t.coins_sell+"币":""})}))})}))}},mounted:function(){},methods:{handleHref:function(t){var e=t.machineId,n=t.machineType,i=t.parentId,a=t.giftId,s=t.giftIdBak;if("1"===n&&"54"!==i){if(!a&&!s||"0"===a&&"0"===s)return void this.$Tip.warning("该机型未设置礼品，请先设置礼品");this.$router.push({name:"machine_detail",query:{mid:e}})}else this.$Tip.warning("该机型不可设置参数")}}},u=d,h=(n("cef7"),n("2877")),m=Object(h["a"])(u,o,c,!1,null,"c65605c4",null),f=m.exports,p=f,v=n("365c"),_={name:"MyMachine",components:{MyStore:s["a"],MachineList:p},data:function(){return{activeNames:[0],columns:[],isLoading:!1,store_id:null}},computed:{},created:function(){var t=this.$route.query.sid;t&&(this.store_id=t)},mounted:function(){},methods:{handleConfirm:function(t){this.store_id=t.value.store_id,this.handleGetMachineList()},handleGetMachineList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.$Loading("加载中"),Object(v["E"])({store_id:this.store_id}).then((function(n){e(),t.$Loading.clear(),"0"===n.return_code?t.columns=n.data.machine_list:t.$Tip.warning(n.msg)}))},handleRefresh:function(){var t=this;this.handleGetMachineList((function(){t.isLoading=!1}))}}},g=_,C=(n("7896"),Object(h["a"])(g,i,a,!1,null,null,null));e["default"]=C.exports},"48d0":function(t,e,n){"use strict";var i=n("9d6c"),a=n.n(i);a.a},5594:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-popup"},[n("van-popup",{attrs:{position:"bottom","close-on-click-overlay":t.maskClose,overlay:t.overlay},on:{"click-overlay":t.handleClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:t.columns,"default-index":t.defaultIndex},on:{change:t.handleChange,cancel:t.handleCancel,confirm:t.handleConfirm}})],1)],1)},a=[],s=(n("a9e3"),{name:"BottomPopup",components:{},props:{maskClose:{type:Boolean,default:!1},columns:{default:function(){return[]},type:Array},overlay:{default:!0,type:Boolean},show:{default:!1,type:Boolean},defaultIndex:Number},data:function(){return{loading:!0}},computed:{},watch:{columns:{handler:function(){this.loading=!1}}},mounted:function(){},methods:{handleCancel:function(){this.$emit("trigger-cancel"),this.handleClose()},handleConfirm:function(t,e){this.$emit("trigger-confirm",{value:t,index:e}),this.handleClose()},handleClose:function(){this.$emit("trigger-close")},handleChange:function(){}}}),o=s,c=n("2877"),r=Object(c["a"])(o,i,a,!1,null,"2f72655a",null),l=r.exports;e["a"]=l},7896:function(t,e,n){"use strict";var i=n("29d9"),a=n.n(i);a.a},"9d6c":function(t,e,n){},a8aa:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-store"},[n("div",{staticClass:"my-store-container size-32 flex-row flex-start-center"},[n("div",{on:{click:t.handleClick}},[n("span",{staticClass:"my-store-name color-393D49"},[t._v(t._s(t.store.store_name))]),n("van-icon",{staticClass:"color-de",attrs:{name:t.arrow}})],1),t._t("default")],2),n("div",{staticClass:"border"}),n("div",[n("BottomPopup",{attrs:{columns:t.columns,"default-index":t.selectIndex,show:t.show},on:{"trigger-confirm":t.handleConfirm,"trigger-close":t.handleClose}})],1)])},a=[],s=(n("4de4"),n("d81d"),n("a9e3"),n("5530")),o=n("5594"),c=n("2f62"),r={name:"MyStore",components:{BottomPopup:o["a"]},props:{open:{default:!1,type:Boolean},defaultIndex:Number,storeId:[String,Number]},data:function(){return{show:!1,store:{store_name:"请选择门店"},selectIndex:null}},computed:Object(s["a"])(Object(s["a"])({},Object(c["d"])({storeList:function(t){return t.common.storeList}})),{},{columns:{get:function(){var t=this.storeList;return t.map((function(t){var e=Object(s["a"])({text:t.store_name},t);return e}))}},arrow:function(){return this.show?"arrow-up":"arrow-down"}}),watch:{storeList:{handler:function(t){var e=this.storeId,n=this.defaultIndex;if(t.length>0){if(e&&e>=0){var i=t.map((function(t,e){return Object(s["a"])(Object(s["a"])({},t),{},{index:e})})).filter((function(t){return t.store_id===String(e)}));if(i.length>0){var a=i[0];this.selectIndex=a.index,this.store=Object(s["a"])({},a)}}else n>=0&&(this.selectIndex=n,this.store=Object(s["a"])({},t[0]));(n>=0||e>=0)&&this.$emit("trigger-click",{value:Object(s["a"])(Object(s["a"])({},this.store),{},{index:this.selectIndex})})}},immediate:!0}},created:function(){0===this.storeList.length&&this.getStore()},methods:Object(s["a"])(Object(s["a"])({},Object(c["b"])(["COMMON_GETSTORE_ACTION"])),{},{handleClick:function(){this.show=!0},handleConfirm:function(t){var e=t.value,n=t.index;this.store=Object(s["a"])({},e),this.$emit("trigger-click",{value:e,index:n})},handleClose:function(){this.show=!1},getStore:function(){var t=this;this.COMMON_GETSTORE_ACTION().then((function(e){"0"!==e.return_code&&t.$Tip.warning(e.msg)}))}})},l=r,d=(n("48d0"),n("2877")),u=Object(d["a"])(l,i,a,!1,null,"de8e6c12",null),h=u.exports;e["a"]=h},cef7:function(t,e,n){"use strict";var i=n("d88f"),a=n.n(i);a.a},d88f:function(t,e,n){}}]);