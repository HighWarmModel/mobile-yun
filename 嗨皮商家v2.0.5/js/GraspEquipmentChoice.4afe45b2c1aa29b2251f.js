(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["GraspEquipmentChoice"],{"048b":function(t,e,n){"use strict";var i=n("40ec"),a=n.n(i);a.a},"097b":function(t,e,n){"use strict";var i=n("21f1"),a=n.n(i);a.a},"21f1":function(t,e,n){},"40ec":function(t,e,n){},"48d0":function(t,e,n){"use strict";var i=n("9d6c"),a=n.n(i);a.a},"492f":function(t,e,n){"use strict";n("caad"),n("a9e3");var i,a,o=n("5530"),s=n("5cc0"),r=n("2f62"),l={name:"MyMachine",components:{LinkageSelection:s["a"]},model:{prop:"value",event:"trigger-change"},props:{storeId:[String,Number],areaId:[String,Number],value:{default:function(){return{}}},title:{type:String,default:"请选择机台"},type:{type:String,default:"MACHINE",validator:function(t){return["MACHINE","MACHINE_TYPE"].includes(t)}},rightIcon:{type:String,default:"arrow"},columns:Array},data:function(){return{list:[]}},watch:{areaId:{handler:function(t){var e=this.storeId,n=this.type;if(e&&t){var i={storeId:e,areaId:t};if("MACHINE_TYPE"===n)return void this.COMMON_GETMACHINETYPE_ACTION(i).then(this.handleReturnDeal);this.COMMON_GETMACHINE_ACTION(i).then(this.handleReturnDeal)}else this.list=[],this.$emit("trigger-change",{})},immediate:!0}},methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["COMMON_GETMACHINE_ACTION","COMMON_GETMACHINETYPE_ACTION"])),{},{handleChoseMachine:function(t){this.$emit("trigger-change",t.value)},handleReturnDeal:function(t){if("0"===t.return_code){var e=t.data;this.list=e,this.$emit("trigger-change",{})}}}),render:function(){for(var t,e=arguments[0],n=this.value,i=this.list,a=this.handleChoseMachine,o=this.title,r=this.rightIcon,l=0,c=0;c<i.length;++c)if(i[c].id===n.id){t=i[c].no,l=c;break}return e(s["a"],{attrs:{"right-icon":r,title:o,value:t,columns:i,"default-index":l},on:{"trigger-confirm":a}})}},c=l,d=n("2877"),u=Object(d["a"])(c,i,a,!1,null,null,null),h=u.exports;e["a"]=h},5594:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-popup"},[n("van-popup",{attrs:{position:"bottom","close-on-click-overlay":t.maskClose,overlay:t.overlay},on:{"click-overlay":t.handleClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:t.columns,"default-index":t.defaultIndex},on:{change:t.handleChange,cancel:t.handleCancel,confirm:t.handleConfirm}})],1)],1)},a=[],o=(n("a9e3"),{name:"BottomPopup",components:{},props:{maskClose:{type:Boolean,default:!1},columns:{default:function(){return[]},type:Array},overlay:{default:!0,type:Boolean},show:{default:!1,type:Boolean},defaultIndex:Number},data:function(){return{loading:!0}},computed:{},watch:{columns:{handler:function(){this.loading=!1}}},mounted:function(){},methods:{handleCancel:function(){this.$emit("trigger-cancel"),this.handleClose()},handleConfirm:function(t,e){this.$emit("trigger-confirm",{value:t,index:e}),this.handleClose()},handleClose:function(){this.$emit("trigger-close")},handleChange:function(){}}}),s=o,r=n("2877"),l=Object(r["a"])(s,i,a,!1,null,"2f72655a",null),c=l.exports;e["a"]=c},"5cc0":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CellList",{attrs:{title:t.title,value:t.value,"right-icon":t.rightIcon,placeholder:t.placeholder},on:{"trigger-click":function(e){t.show=!0}},scopedSlots:t._u([t.$slots.title?{key:"title",fn:function(){return[t._t("title")]},proxy:!0}:null,t.$slots["right-icon"]?{key:"right-icon",fn:function(){return[t._t("right-icon")]},proxy:!0}:null],null,!0)}),n("BottomPopup",{attrs:{columns:t.columns,"default-index":t.defaultIndex,show:t.show},on:{"trigger-confirm":t.handleConfirm,"trigger-close":function(e){t.show=!1}}})],1)},a=[],o=(n("a9e3"),n("a5ab")),s=n("5594"),r={name:"LinkageSelection",components:{CellList:o["a"],BottomPopup:s["a"]},model:{prop:"value",event:"trigger-confirm"},props:{value:{default:""},defaultIndex:Number,disabled:{type:Boolean,default:!1},title:String,placeholder:String,columns:Array,rightIcon:{type:String}},data:function(){return{show:!1}},computed:{},mounted:function(){},methods:{handleConfirm:function(t){this.disabled||this.$emit("trigger-confirm",t)}}},l=r,c=n("2877"),d=Object(c["a"])(l,i,a,!1,null,"673b6974",null),u=d.exports;e["a"]=u},"76f6":function(t,e,n){},"9d6c":function(t,e,n){},a5ab:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cell-list flex-row flex-between-center padding-20-30",on:{click:t.handleClick}},[n("div",{staticClass:"cell-list-title size-28 color-3"},[t._v(" "+t._s(t.$slots["title"]?null:t.title)+" "),t._t("title")],2),n("div",{staticClass:"size-28 flex-row flex-start-center"},[t.value?n("span",[t._v(t._s(t.value))]):n("span",{staticClass:"cell-list-placeholder"},[t._v(t._s(t.placeholder))]),t.rightIcon?n("van-icon",{staticClass:"flex-row flex-center margin-left-10 size-32",attrs:{color:"#969799",name:t.rightIcon}}):t._e(),t._t("rigth-icon")],2)])},a=[],o={name:"CellList",components:{},props:{title:String,value:String,placeholder:String,leftIcon:{type:Boolean,default:!1},rightIcon:{type:String}},data:function(){return{}},computed:{},mounted:function(){},methods:{handleClick:function(t){this.$emit("trigger-click",t)}}},s=o,r=(n("097b"),n("2877")),l=Object(r["a"])(s,i,a,!1,null,null,null),c=l.exports;e["a"]=c},a8aa:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-store"},[n("div",{staticClass:"my-store-container size-32 flex-row flex-start-center"},[n("div",{on:{click:t.handleClick}},[n("span",{staticClass:"my-store-name color-393D49"},[t._v(t._s(t.store.store_name))]),n("van-icon",{staticClass:"color-de",attrs:{name:t.arrow}})],1),t._t("default")],2),n("div",{staticClass:"border"}),n("div",[n("BottomPopup",{attrs:{columns:t.columns,"default-index":t.selectIndex,show:t.show},on:{"trigger-confirm":t.handleConfirm,"trigger-close":t.handleClose}})],1)])},a=[],o=(n("4de4"),n("d81d"),n("a9e3"),n("5530")),s=n("5594"),r=n("2f62"),l={name:"MyStore",components:{BottomPopup:s["a"]},props:{open:{default:!1,type:Boolean},defaultIndex:Number,storeId:[String,Number]},data:function(){return{show:!1,store:{store_name:"请选择门店"},selectIndex:null}},computed:Object(o["a"])(Object(o["a"])({},Object(r["d"])({storeList:function(t){return t.common.storeList}})),{},{columns:{get:function(){var t=this.storeList;return t.map((function(t){var e=Object(o["a"])({text:t.store_name},t);return e}))}},arrow:function(){return this.show?"arrow-up":"arrow-down"}}),watch:{storeList:{handler:function(t){var e=this.storeId,n=this.defaultIndex;if(t.length>0){if(e&&e>=0){var i=t.map((function(t,e){return Object(o["a"])(Object(o["a"])({},t),{},{index:e})})).filter((function(t){return t.store_id===String(e)}));if(i.length>0){var a=i[0];this.selectIndex=a.index,this.store=Object(o["a"])({},a)}}else n>=0&&(this.selectIndex=n,this.store=Object(o["a"])({},t[0]));(n>=0||e>=0)&&this.$emit("trigger-click",{value:Object(o["a"])(Object(o["a"])({},this.store),{},{index:this.selectIndex})})}},immediate:!0}},created:function(){0===this.storeList.length&&this.getStore()},methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["COMMON_GETSTORE_ACTION"])),{},{handleClick:function(){this.show=!0},handleConfirm:function(t){var e=t.value,n=t.index;this.store=Object(o["a"])({},e),this.$emit("trigger-click",{value:e,index:n})},handleClose:function(){this.show=!1},getStore:function(){var t=this;this.COMMON_GETSTORE_ACTION().then((function(e){"0"!==e.return_code&&t.$Tip.warning(e.msg)}))}})},c=l,d=(n("48d0"),n("2877")),u=Object(d["a"])(c,i,a,!1,null,"de8e6c12",null),h=u.exports;e["a"]=h},b4ee:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{class:t.wrapClasses,style:t.styles,on:{click:t.handleClick}})},a=[],o=(n("99af"),n("b0c0"),n("d3b7"),n("ac1f"),n("25f0"),n("1276"),n("2909")),s={name:"HhfIcon",components:{},props:{classes:[Array,String],styles:Object,name:{type:String,required:!0}},data:function(){return{}},computed:{wrapClasses:function(){var t=["hhf-icon","hhf-iconfont","hhf-icon-".concat(this.name)];if("[object Array]"===Object.prototype.toString.call(this.classes))t=[].concat(Object(o["a"])(t),Object(o["a"])(this.classes));else if("string"===typeof this.classes){var e=this.classes.split(" ");t=[].concat(Object(o["a"])(t),Object(o["a"])(e))}return t}},mounted:function(){},methods:{handleClick:function(){this.$emit("trigger-click")}}},r=s,l=n("2877"),c=Object(l["a"])(r,i,a,!1,null,"0e833f38",null),d=c.exports;e["a"]=d},dd89:function(t,e,n){"use strict";var i=n("76f6"),a=n.n(i);a.a},de0f:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["size-0",t.getBottomZIndexCls]},[n("div",{class:t.wrapClasses,style:t.wrapStyles,on:{click:t.handleClick}},[n("div",{staticClass:"hhf-button-container flex-row flex-center"},[!t.$slots.loading&&t.loading?[n("div",{staticClass:"hhf-button-loading-container"},[n("div",{staticClass:"hhf-button-loading-content"},[n("HhfIcon",{attrs:{name:"spinner-loading"}})],1)])]:t.loading?[t._t("loading")]:t._e(),t._t("default")],2)])])},a=[],o=(n("99af"),n("caad"),n("a9e3"),n("d3b7"),n("ac1f"),n("25f0"),n("1276"),n("5530")),s=n("b4ee"),r={name:"",components:{HhfIcon:s["a"]},props:{disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"加载中…"},text:{type:String,default:"确定"},bottomZIndex:{type:Number},radius:String,activeColor:Object,plain:Boolean,type:{type:String,default:"default",validator:function(t){return["default","primary","success","info","warning","danger"].includes(t)}},size:{type:String,default:"normal",validator:function(t){return["normal","large","small","mini","custom"].includes(t)}},classes:[String,Array],styles:Object},data:function(){return{}},computed:{getBottomZIndexCls:function(){return this.bottomZIndex?"hhf-button-".concat(this.size,"-height"):null},wrapClasses:function(){var t=this.classes,e=this.size,n=this.type,i=this.plain,a=this.loading,o=this.disabled,s=this.bottomZIndex,r=["hhf-button","hhf-button-".concat(n),"hhf-button-".concat(e),s?"hhf-button-".concat(e,"-fixed"):null];if("[object Array]"===Object.prototype.toString.call(t))r=r.concat(t);else if("string"===typeof t){var l=t.split(" ");r=r.concat(l)}return i&&r.push("hhf-button-plain"),a&&r.push("hhf-button-loading"),o&&r.push("hhf-button-disabled"),r},wrapStyles:function(){var t=this.styles,e=this.radius,n=this.bottomZIndex,i=Object(o["a"])(Object(o["a"])({},t),{},{borderRadius:e,zIndex:n});return i}},mounted:function(){},methods:{handleClick:function(){var t=this.loading,e=this.disabled;t||e||this.$emit("trigger-click")}}},l=r,c=(n("048b"),n("2877")),d=Object(c["a"])(l,i,a,!1,null,null,null),u=d.exports;e["a"]=u},e0f7:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"grasp-equipment-choice"},[n("div",{staticClass:"header bgcolor-f"},[n("MyStore",{attrs:{"store-id":t.storeId,"default-index":0},on:{"trigger-click":t.handleConfirm}},[n("div",{staticClass:"flex-row flex-end-center flex-1"},[n("van-icon",{attrs:{name:"question-o",size:"0.4rem"},on:{click:t.handleRouter}})],1)])],1),n("div",{staticClass:"container flex-column flex-start-stretch"},[n("div",{staticClass:"bgcolor-f content"},[n("h5",{staticClass:"margin-0 padding-20-30 size-30"},[t._v("我的机台")]),n("div",{staticClass:"border"}),n("MyArea",{attrs:{"store-id":t.storeId},model:{value:t.area,callback:function(e){t.area=e},expression:"area"}}),n("div",{staticClass:"border"}),n("MyMachine",{attrs:{"store-id":t.storeId,"area-id":t.area.id},model:{value:t.machine,callback:function(e){t.machine=e},expression:"machine"}}),n("div",{staticClass:"border"})],1),t.machine.id?n("div",{staticClass:"bgcolor-f content"},[n("CellList",{attrs:{"right-icon":"arrow",placeholder:"请选择礼品"},on:{"trigger-click":t.handleRouterGift},scopedSlots:t._u([{key:"title",fn:function(){return[n("h5",{staticClass:"margin-0 size-30"},[t._v("我的礼品")])]},proxy:!0}],null,!1,1321958385)}),n("div",{staticClass:"border"}),n("div",[n("van-cell",{attrs:{title:"礼品名称",value:t.giftInfoSelected.name}})],1),n("div",{staticClass:"border"}),n("div",[n("van-cell",{attrs:{title:"礼品编号",value:t.giftInfoSelected.id}})],1)],1):t._e()]),t.finishShow?n("div",{staticClass:"finish-btn-content"},[n("HhfButton",{attrs:{type:"info",loading:t.finishLoading,radius:"0.05rem"},on:{"trigger-click":t.handleFinished}},[t._v("完成")])],1):t._e(),t.giftInfoSelected.id?n("div",{staticClass:"fixed-max-width bottom-0 size-0 zindex-2"},[n("HhfButton",{attrs:{size:"large",type:"info",loading:t.loading,radius:"0.05rem"},on:{"trigger-click":t.handleStart}},[t._v("开始配置")])],1):t._e()])},a=[],o=n("5530"),s=n("a8aa"),r=n("f059"),l=n("492f"),c=n("de0f"),d=n("a5ab"),u=n("2f62"),h=n("365c"),f={name:"GraspEquipmentChoice",components:{MyStore:s["a"],CellList:d["a"],HhfButton:c["a"],MyArea:r["a"],MyMachine:l["a"]},data:function(){return{finishShow:!1,finishLoading:!1,loading:!1,storeId:null,area:{},machine:{},areaColumns:[],areaValue:{},machineColumns:[],machineValue:{}}},computed:Object(o["a"])({},Object(u["d"])({giftInfoSelected:function(t){return t.intelligentGrasp.giftInfoSelected}})),activated:function(){this.finishShow=!1,this.finishLoading=!1},created:function(){var t=this.$route.query,e=t.sid,n=t.mid,i=t.aid;e&&(this.storeId=e),e&&i&&(this.area.id=i),e&&i&&n&&(this.machine.id=n),this.APP_ADDCACHEPAGELIST_MUTATE("GraspEquipmentChoice")},methods:Object(o["a"])(Object(o["a"])({},Object(u["c"])(["APP_ADDCACHEPAGELIST_MUTATE","INTELLIGENTGRASP_EDITGIFTINFOSELECTED_MUTATE"])),{},{handleFinished:function(){var t=this;this.finishLoading=!0,Object(h["n"])({store_id:this.storeId,gift_id:this.giftInfoSelected.id,mid:this.machine.id}).then((function(e){t.finishLoading=!1,"0"===e.return_code?(t.$Loading.clear(),t.finishShow=!1,t.$Tip.success(e.msg)):e.msg&&t.$Tip.warning({message:e.msg,maskColor:"rgba(0, 0, 0,.8)",mask:!0})}))},handleStart:function(){var t=this;this.loading=!0,Object(h["lb"])({store_id:this.storeId,gift_id:this.giftInfoSelected.id,mid:this.machine.id}).then((function(e){t.loading=!1,"0"===e.return_code?(t.$Loading({message:"请在机台上按【下抓键】开始配置",mask:!0,maskColor:"rgba(0, 0, 0,.8)",zIndex:11}),t.finishShow=!0):e.msg&&t.$Tip.warning(e.msg)}))},handleConfirm:function(t){this.storeId=t.value.store_id,this.INTELLIGENTGRASP_EDITGIFTINFOSELECTED_MUTATE({})},handleRouter:function(){this.$router.push({name:"Article"})},handleRouterGift:function(){this.$router.push({name:"GraspGiftChoice",query:{sid:this.storeId}})},handleSave:function(){}})},m=f,g=(n("dd89"),n("2877")),p=Object(g["a"])(m,i,a,!1,null,"02b46c29",null);e["default"]=p.exports},f059:function(t,e,n){"use strict";n("b0c0");var i,a,o=n("5530"),s=n("5cc0"),r=n("2f62"),l={name:"MyArea",components:{LinkageSelection:s["a"]},model:{prop:"value",event:"trigger-change"},props:{storeId:String,value:{default:function(){return{}}},title:{type:String,default:"请选择区域"},rightIcon:{type:String,default:"arrow"},columns:Array},data:function(){return{list:[]}},watch:{storeId:{handler:function(t){var e=this;t&&this.COMMON_GETAREA_ACTION({storeId:t}).then((function(t){"0"===t.return_code&&(e.list=t.data,e.$emit("trigger-change",{}))}))},immediate:!0}},methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["COMMON_GETAREA_ACTION"])),{},{handleChoseArea:function(t){this.$emit("trigger-change",t.value)}}),render:function(){for(var t,e=arguments[0],n=this.value,i=this.list,a=this.handleChoseArea,o=this.title,r=this.rightIcon,l=0,c=0;c<i.length;++c)if(i[c].id===n.id){t=i[c].name,l=c;break}return e(s["a"],{attrs:{"right-icon":r,title:o,value:t,columns:i,"default-index":l},on:{"trigger-confirm":a}})}},c=l,d=n("2877"),u=Object(d["a"])(c,i,a,!1,null,"1953f11e",null),h=u.exports;e["a"]=h}}]);